/**
 * @name car-service
 * @description Easy and convenient way to register cars and their repairs.
 *
 * @version 1.0.0
 * @author Deyan 'stambolievv' Stamboliev
 * @license Apache-2.0
 */
var t,e,i,n,r,s,a,o=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},c=(t,e,i)=>(o(t,e,"read from private field"),i?i.call(t):e.get(t)),l=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},d=(t,e,i)=>(o(t,e,"access private method"),i);!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var u=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},h=x,p=y,f=function(t){return _(y(t))},m=_,v=A,g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function y(t){for(var e,i=[],n=0,r=0,s="";null!=(e=g.exec(t));){var a=e[0],o=e[1],c=e.index;if(s+=t.slice(r,c),r=c+a.length,o)s+=o[1];else{s&&(i.push(s),s="");var l=e[2],d=e[3],u=e[4],h=e[5],p=e[6],f=e[7],m="+"===p||"*"===p,v="?"===p||"*"===p,y=l||"/",_=u||h||(f?".*":"[^"+y+"]+?");i.push({name:d||n++,prefix:l||"",delimiter:y,optional:v,repeat:m,pattern:$(_)})}}return r<t.length&&(s+=t.substr(r)),s&&i.push(s),i}function _(t){for(var e=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(e[i]=new RegExp("^"+t[i].pattern+"$"));return function(i){for(var n="",r=i||{},s=0;s<t.length;s++){var a=t[s];if("string"!=typeof a){var o,c=r[a.name];if(null==c){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(u(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<c.length;l++){if(o=encodeURIComponent(c[l]),!e[s].test(o))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+o+'"');n+=(0===l?a.prefix:a.delimiter)+o}}else{if(o=encodeURIComponent(c),!e[s].test(o))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+o+'"');n+=a.prefix+o}}else n+=a}return n}}function b(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function $(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function w(t,e){return t.keys=e,t}function C(t){return t.sensitive?"":"i"}function A(t,e){for(var i=(e=e||{}).strict,n=!1!==e.end,r="",s=t[t.length-1],a="string"==typeof s&&/\/$/.test(s),o=0;o<t.length;o++){var c=t[o];if("string"==typeof c)r+=b(c);else{var l=b(c.prefix),d=c.pattern;c.repeat&&(d+="(?:"+l+d+")*"),r+=d=c.optional?l?"(?:"+l+"("+d+"))?":"("+d+")?":l+"("+d+")"}}return i||(r=(a?r.slice(0,-2):r)+"(?:\\/(?=$))?"),r+=n?"$":i&&a?"":"(?=\\/|$)",new RegExp("^"+r,C(e))}function x(t,e,i){return u(e=e||[])?i||(i={}):(i=e,e=[]),t instanceof RegExp?function(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return w(t,e)}(t,e):u(t)?function(t,e,i){for(var n=[],r=0;r<t.length;r++)n.push(x(t[r],e,i).source);return w(new RegExp("(?:"+n.join("|")+")",C(i)),e)}(t,e,i):function(t,e,i){for(var n=y(t),r=A(n,i),s=0;s<n.length;s++)"string"!=typeof n[s]&&e.push(n[s]);return w(r,e)}(t,e,i)}h.parse=p,h.compile=f,h.tokensToFunction=m,h.tokensToRegExp=v;var E,S="undefined"!=typeof document,k="undefined"!=typeof window,N="undefined"!=typeof history,I="undefined"!=typeof process,P=S&&document.ontouchstart?"touchstart":"click",R=k&&!(!window.history.location&&!window.location);function T(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function L(t,e){if("function"==typeof t)return L.call(this,"*",t);if("function"==typeof e)for(var i=new U(t,null,this),n=1;n<arguments.length;++n)this.callbacks.push(i.middleware(arguments[n]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function O(t){if(!t.handled){var e=this,i=e._window;(e._hashbang?R&&this._getBase()+i.location.hash.replace("#!",""):R&&i.location.pathname+i.location.search)!==t.canonicalPath&&(e.stop(),t.handled=!1,R&&(i.location.href=t.canonicalPath))}}function D(t,e,i){var n=this.page=i||L,r=n._window,s=n._hashbang,a=n._getBase();"/"===t[0]&&0!==t.indexOf(a)&&(t=a+(s?"#!":"")+t);var o=t.indexOf("?");this.canonicalPath=t;var c=new RegExp("^"+a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=t.replace(c,"")||"/",s&&(this.path=this.path.replace("#!","")||"/"),this.title=S&&r.document.title,this.state=e||{},this.state.path=t,this.querystring=~o?n._decodeURLEncodedURIComponent(t.slice(o+1)):"",this.pathname=n._decodeURLEncodedURIComponent(~o?t.slice(0,o):t),this.params={},this.hash="",!s){if(!~this.path.indexOf("#"))return;var l=this.path.split("#");this.path=this.pathname=l[0],this.hash=n._decodeURLEncodedURIComponent(l[1])||"",this.querystring=this.querystring.split("#")[0]}}function U(t,e,i){var n=this.page=i||j,r=e||{};r.strict=r.strict||n._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=h(this.path,this.keys=[],r)}T.prototype.configure=function(t){var e=t||{};this._window=e.window||k&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&k,this._click=!1!==e.click&&S,this._hashbang=!!e.hashbang;var i=this._window;this._popstate?i.addEventListener("popstate",this._onpopstate,!1):k&&i.removeEventListener("popstate",this._onpopstate,!1),this._click?i.document.addEventListener(P,this.clickHandler,!1):S&&i.document.removeEventListener(P,this.clickHandler,!1),this._hashbang&&k&&!N?i.addEventListener("hashchange",this._onpopstate,!1):k&&i.removeEventListener("hashchange",this._onpopstate,!1)},T.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},T.prototype._getBase=function(){var t=this._base;if(t)return t;var e=k&&this._window&&this._window.location;return k&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},T.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},T.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var i;if(this._running=!0,R){var n=this._window.location;i=this._hashbang&&~n.hash.indexOf("#!")?n.hash.substr(2)+n.search:this._hashbang?n.search+n.hash:n.pathname+n.search+n.hash}this.replace(i,null,!0,e.dispatch)}},T.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(P,this.clickHandler,!1),k&&t.removeEventListener("popstate",this._onpopstate,!1),k&&t.removeEventListener("hashchange",this._onpopstate,!1)}},T.prototype.show=function(t,e,i,n){var r=new D(t,e,this),s=this.prevContext;return this.prevContext=r,this.current=r.path,!1!==i&&this.dispatch(r,s),!1!==r.handled&&!1!==n&&r.pushState(),r},T.prototype.back=function(t,e){var i=this;if(this.len>0){var n=this._window;N&&n.history.back(),this.len--}else t?setTimeout((function(){i.show(t,e)})):setTimeout((function(){i.show(i._getBase(),e)}))},T.prototype.redirect=function(t,e){var i=this;"string"==typeof t&&"string"==typeof e&&L.call(this,t,(function(t){setTimeout((function(){i.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){i.replace(t)}),0)},T.prototype.replace=function(t,e,i,n){var r=new D(t,e,this),s=this.prevContext;return this.prevContext=r,this.current=r.path,r.init=i,r.save(),!1!==n&&this.dispatch(r,s),r},T.prototype.dispatch=function(t,e){var i=0,n=0,r=this;function s(){var e=r.callbacks[i++];if(t.path===r.current)return e?void e(t,s):O.call(r,t);t.handled=!1}e?function t(){var i=r.exits[n++];if(!i)return s();i(e,t)}():s()},T.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var i=new U(t,null,this),n=1;n<arguments.length;++n)this.exits.push(i.middleware(arguments[n]))},T.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,i=t.path||(t.composedPath?t.composedPath():null);if(i)for(var n=0;n<i.length;n++)if(i[n].nodeName&&"A"===i[n].nodeName.toUpperCase()&&i[n].href){e=i[n];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var r="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var s=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==s)&&!(s&&s.indexOf("mailto:")>-1)&&!(r?e.target.baseVal:e.target)&&(r||this.sameOrigin(e.href))){var a=r?e.href.baseVal:e.pathname+e.search+(e.hash||"");a="/"!==a[0]?"/"+a:a,I&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var o=a,c=this._getBase();0===a.indexOf(c)&&(a=a.substr(c.length)),this._hashbang&&(a=a.replace("#!","")),(!c||o!==a||R&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(o))}}}}},T.prototype._onpopstate=(E=!1,k?(S&&"complete"===document.readyState?E=!0:window.addEventListener("load",(function(){setTimeout((function(){E=!0}),0)})),function(t){if(E){var e=this;if(t.state){var i=t.state.path;e.replace(i,t.state)}else if(R){var n=e._window.location;e.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}}):function(){}),T.prototype._which=function(t){return null==(t=t||k&&this._window.event).which?t.button:t.which},T.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&R)return new URL(t,e.location.toString());if(S){var i=e.document.createElement("a");return i.href=t,i}},T.prototype.sameOrigin=function(t){if(!t||!R)return!1;var e=this._toURL(t),i=this._window.location;return i.protocol===e.protocol&&i.hostname===e.hostname&&(i.port===e.port||""===i.port&&(80==e.port||443==e.port))},T.prototype._samePath=function(t){if(!R)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},T.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},D.prototype.pushState=function(){var t=this.page,e=t._window,i=t._hashbang;t.len++,N&&e.history.pushState(this.state,this.title,i&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},D.prototype.save=function(){var t=this.page;N&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},U.prototype.middleware=function(t){var e=this;return function(i,n){if(e.match(i.path,i.params))return i.routePath=e.path,t(i,n);n()}},U.prototype.match=function(t,e){var i=this.keys,n=t.indexOf("?"),r=~n?t.slice(0,n):t,s=this.regexp.exec(decodeURIComponent(r));if(!s)return!1;delete e[0];for(var a=1,o=s.length;a<o;++a){var c=i[a-1],l=this.page._decodeURLEncodedURIComponent(s[a]);void 0===l&&hasOwnProperty.call(e,c.name)||(e[c.name]=l)}return!0};var j=function t(){var e=new T;function i(){return L.apply(e,arguments)}return i.callbacks=e.callbacks,i.exits=e.exits,i.base=e.base.bind(e),i.strict=e.strict.bind(e),i.start=e.start.bind(e),i.stop=e.stop.bind(e),i.show=e.show.bind(e),i.back=e.back.bind(e),i.redirect=e.redirect.bind(e),i.replace=e.replace.bind(e),i.dispatch=e.dispatch.bind(e),i.exit=e.exit.bind(e),i.configure=e.configure.bind(e),i.sameOrigin=e.sameOrigin.bind(e),i.clickHandler=e.clickHandler.bind(e),i.create=t,Object.defineProperty(i,"len",{get:function(){return e.len},set:function(t){e.len=t}}),Object.defineProperty(i,"current",{get:function(){return e.current},set:function(t){e.current=t}}),i.Context=D,i.Route=U,i}(),M=j,H=j;M.default=H;const q=window,V=q.ShadowRoot&&(void 0===q.ShadyCSS||q.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,z=Symbol(),B=new WeakMap;class J{constructor(t,e,i){if(this._$cssResult$=!0,i!==z)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(V&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=B.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&B.set(e,t))}return t}toString(){return this.cssText}}const K=V?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new J("string"==typeof t?t:t+"",void 0,z))(e)})(t):t;var W;const G=window,Y=G.trustedTypes,Z=Y?Y.emptyScript:"",F=G.reactiveElementPolyfillSupport,X={toAttribute(t,e){switch(e){case Boolean:t=t?Z:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(n){i=null}}return i}},Q=(t,e)=>e!==t&&(e==e||t==t),tt={attribute:!0,type:String,converter:X,reflect:!1,hasChanged:Q},et="finalized";class it extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const n=this._$Ep(i,e);void 0!==n&&(this._$Ev.set(n,i),t.push(n))})),t}static createProperty(t,e=tt){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const r=this[t];this[e]=n,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||tt}static finalize(){if(this.hasOwnProperty(et))return!1;this[et]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(K(t))}else void 0!==t&&e.push(K(t));return e}static _$Ep(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}_$Eu(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{V?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const i=document.createElement("style"),n=q.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=e.cssText,t.appendChild(i)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=tt){var n;const r=this.constructor._$Ep(t,i);if(void 0!==r&&!0===i.reflect){const s=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:X).toAttribute(e,i.type);this._$El=t,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$El=null}}_$AK(t,e){var i;const n=this.constructor,r=n._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=n.getPropertyOptions(r),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(i=t.converter)||void 0===i?void 0:i.fromAttribute)?t.converter:X;this._$El=r,this[r]=s.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,i){let n=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||Q)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$Ek()}catch(n){throw e=!1,this._$Ek(),n}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var nt;it[et]=!0,it.elementProperties=new Map,it.elementStyles=[],it.shadowRootOptions={mode:"open"},null==F||F({ReactiveElement:it}),(null!==(W=G.reactiveElementVersions)&&void 0!==W?W:G.reactiveElementVersions=[]).push("1.6.3");const rt=window,st=rt.trustedTypes,at=st?st.createPolicy("lit-html",{createHTML:t=>t}):void 0,ot="$lit$",ct=`lit$${(Math.random()+"").slice(9)}$`,lt="?"+ct,dt=`<${lt}>`,ut=document,ht=()=>ut.createComment(""),pt=t=>null===t||"object"!=typeof t&&"function"!=typeof t,ft=Array.isArray,mt="[ \t\n\f\r]",vt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,gt=/-->/g,yt=/>/g,_t=RegExp(`>|${mt}(?:([^\\s"'>=/]+)(${mt}*=${mt}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),bt=/'/g,$t=/"/g,wt=/^(?:script|style|textarea|title)$/i,Ct=(kt=1,(t,...e)=>({_$litType$:kt,strings:t,values:e})),At=Symbol.for("lit-noChange"),xt=Symbol.for("lit-nothing"),Et=new WeakMap,St=ut.createTreeWalker(ut,129,null,!1);var kt;function Nt(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==at?at.createHTML(e):e}class It{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let r=0,s=0;const a=t.length-1,o=this.parts,[c,l]=((t,e)=>{const i=t.length-1,n=[];let r,s=2===e?"<svg>":"",a=vt;for(let o=0;o<i;o++){const e=t[o];let i,c,l=-1,d=0;for(;d<e.length&&(a.lastIndex=d,c=a.exec(e),null!==c);)d=a.lastIndex,a===vt?"!--"===c[1]?a=gt:void 0!==c[1]?a=yt:void 0!==c[2]?(wt.test(c[2])&&(r=RegExp("</"+c[2],"g")),a=_t):void 0!==c[3]&&(a=_t):a===_t?">"===c[0]?(a=null!=r?r:vt,l=-1):void 0===c[1]?l=-2:(l=a.lastIndex-c[2].length,i=c[1],a=void 0===c[3]?_t:'"'===c[3]?$t:bt):a===$t||a===bt?a=_t:a===gt||a===yt?a=vt:(a=_t,r=void 0);const u=a===_t&&t[o+1].startsWith("/>")?" ":"";s+=a===vt?e+dt:l>=0?(n.push(i),e.slice(0,l)+ot+e.slice(l)+ct+u):e+ct+(-2===l?(n.push(void 0),o):u)}return[Nt(t,s+(t[i]||"<?>")+(2===e?"</svg>":"")),n]})(t,e);if(this.el=It.createElement(c,i),St.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=St.nextNode())&&o.length<a;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith(ot)||e.startsWith(ct)){const i=l[s++];if(t.push(e),void 0!==i){const t=n.getAttribute(i.toLowerCase()+ot).split(ct),e=/([.?@])?(.*)/.exec(i);o.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?Ot:"?"===e[1]?Ut:"@"===e[1]?jt:Lt})}else o.push({type:6,index:r})}for(const e of t)n.removeAttribute(e)}if(wt.test(n.tagName)){const t=n.textContent.split(ct),e=t.length-1;if(e>0){n.textContent=st?st.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],ht()),St.nextNode(),o.push({type:2,index:++r});n.append(t[e],ht())}}}else if(8===n.nodeType)if(n.data===lt)o.push({type:2,index:r});else{let t=-1;for(;-1!==(t=n.data.indexOf(ct,t+1));)o.push({type:7,index:r}),t+=ct.length-1}r++}}static createElement(t,e){const i=ut.createElement("template");return i.innerHTML=t,i}}function Pt(t,e,i=t,n){var r,s,a,o;if(e===At)return e;let c=void 0!==n?null===(r=i._$Co)||void 0===r?void 0:r[n]:i._$Cl;const l=pt(e)?void 0:e._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(s=null==c?void 0:c._$AO)||void 0===s||s.call(c,!1),void 0===l?c=void 0:(c=new l(t),c._$AT(t,i,n)),void 0!==n?(null!==(a=(o=i)._$Co)&&void 0!==a?a:o._$Co=[])[n]=c:i._$Cl=c),void 0!==c&&(e=Pt(t,c._$AS(t,e.values),c,n)),e}class Rt{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:i},parts:n}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:ut).importNode(i,!0);St.currentNode=r;let s=St.nextNode(),a=0,o=0,c=n[0];for(;void 0!==c;){if(a===c.index){let e;2===c.type?e=new Tt(s,s.nextSibling,this,t):1===c.type?e=new c.ctor(s,c.name,c.strings,this,t):6===c.type&&(e=new Mt(s,this,t)),this._$AV.push(e),c=n[++o]}a!==(null==c?void 0:c.index)&&(s=St.nextNode(),a++)}return St.currentNode=ut,r}v(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Tt{constructor(t,e,i,n){var r;this.type=2,this._$AH=xt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cp=null===(r=null==n?void 0:n.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Pt(this,t,e),pt(t)?t===xt||null==t||""===t?(this._$AH!==xt&&this._$AR(),this._$AH=xt):t!==this._$AH&&t!==At&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>ft(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==xt&&pt(this._$AH)?this._$AA.nextSibling.data=t:this.$(ut.createTextNode(t)),this._$AH=t}g(t){var e;const{values:i,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=It.createElement(Nt(n.h,n.h[0]),this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.v(i);else{const t=new Rt(r,this),e=t.u(this.options);t.v(i),this.$(e),this._$AH=t}}_$AC(t){let e=Et.get(t.strings);return void 0===e&&Et.set(t.strings,e=new It(t)),e}T(t){ft(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const r of t)n===e.length?e.push(i=new Tt(this.k(ht()),this.k(ht()),this,this.options)):i=e[n],i._$AI(r),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Lt{constructor(t,e,i,n,r){this.type=1,this._$AH=xt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=xt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,n){const r=this.strings;let s=!1;if(void 0===r)t=Pt(this,t,e,0),s=!pt(t)||t!==this._$AH&&t!==At,s&&(this._$AH=t);else{const n=t;let a,o;for(t=r[0],a=0;a<r.length-1;a++)o=Pt(this,n[i+a],e,a),o===At&&(o=this._$AH[a]),s||(s=!pt(o)||o!==this._$AH[a]),o===xt?t=xt:t!==xt&&(t+=(null!=o?o:"")+r[a+1]),this._$AH[a]=o}s&&!n&&this.j(t)}j(t){t===xt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Ot extends Lt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===xt?void 0:t}}const Dt=st?st.emptyScript:"";class Ut extends Lt{constructor(){super(...arguments),this.type=4}j(t){t&&t!==xt?this.element.setAttribute(this.name,Dt):this.element.removeAttribute(this.name)}}class jt extends Lt{constructor(t,e,i,n,r){super(t,e,i,n,r),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=Pt(this,t,e,0))&&void 0!==i?i:xt)===At)return;const n=this._$AH,r=t===xt&&n!==xt||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,s=t!==xt&&(n===xt||r);r&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class Mt{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Pt(this,t)}}const Ht=rt.litHtmlPolyfillSupport;null==Ht||Ht(It,Tt),(null!==(nt=rt.litHtmlVersions)&&void 0!==nt?nt:rt.litHtmlVersions=[]).push("2.8.0");const qt=(t,e,i)=>{var n,r;const s=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:e;let a=s._$litPart$;if(void 0===a){const t=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;s._$litPart$=a=new Tt(e.insertBefore(ht(),t),t,void 0,null!=i?i:{})}return a._$AI(t),a};var Vt,zt;class Bt extends it{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=qt(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return At}}Bt.finalized=!0,Bt._$litElement$=!0,null===(Vt=globalThis.litElementHydrateSupport)||void 0===Vt||Vt.call(globalThis,{LitElement:Bt});const Jt=globalThis.litElementPolyfillSupport;async function Kt(t,e){const i=new URL(t,"https://parseapi.back4app.com"),n=await fetch(i,e);if(!0!==n.ok){403===n.status&&await $e();const t=await n.json();throw new Error(`${t.error} Status: ${n.status}`,{cause:n})}return n.json()}function Wt(t,e){const i=new Headers({"X-Parse-Application-Id":"0oqWvkMylRfPgcnXNXtOUe8SWSqDZPiHktiLW9Np","X-Parse-REST-API-Key":"4YzVVeTWOVJyamwDNrNaafCLGzwC5qWnt7dw9aot"}),n=_e();return n&&i.append("X-Parse-Session-Token",n.token),e&&i.append("Content-Type","application/json"),{method:t,headers:i,...e?{body:JSON.stringify(e)}:{}}}null==Jt||Jt({LitElement:Bt}),(null!==(zt=globalThis.litElementVersions)&&void 0!==zt?zt:globalThis.litElementVersions=[]).push("3.3.3");const Gt=t=>Kt(t,Wt("GET")),Yt=(t,e)=>Kt(t,Wt("POST",e)),Zt=(t,e)=>Kt(t,Wt("PUT",e)),Ft=t=>Kt(t,Wt("DELETE"));function Xt(t){if(!t)return{};try{return decodeURIComponent(t).split("&").reduce(((t,e)=>{const[i,n]=e.split("=");return t[i.trim()]=(null==n?void 0:n.includes(","))?n.split(",").map(decodeURIComponent):decodeURIComponent(null==n?void 0:n.trim()),t}),{})}catch(e){return console.error(e),{}}}function Qt(t){if(!t)return"";try{return Object.entries(t).filter((([t,e])=>{const i="string"==typeof t&&t.trim().length>0,n="string"==typeof e?e.trim().length>0:Array.isArray(e)&&e.every((t=>"string"==typeof t&&t.trim().length>0));return i&&n})).map((([t,e])=>{const i=Array.isArray(e)?e.map((t=>encodeURIComponent(t.trim()))).join(","):encodeURIComponent(e.trim());return`${encodeURIComponent(t.trim())}=${i}`})).join("&")}catch(e){return console.error(e),""}}function te(t){const e=new FormData(t);return[Object.fromEntries(Array.from(e,(([t,e])=>[t,"string"==typeof e?e.trim():e]))),e=>Array.from(t.elements).forEach((t=>e?t.setAttribute("disabled","true"):t.removeAttribute("disabled")))]}function ee(){if(crypto&&crypto.randomUUID)return crypto.randomUUID();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=~~(16*Math.random());return("x"===t?e:3&e|8).toString(16)}))}function ie(t,e="bg-BG"){try{return Intl.DateTimeFormat(e).format(new Date(t))}catch{return t.toString()}}function ne(t){return`${t}T${function(t){const e=6e4*(new Date).getTimezoneOffset(),i=t&&Number(new Date(t).getTime()+e)||Date.now(),n=new Date(i-e).toISOString();return n.split("T")[1].slice(0,-5)}()}.000Z`}function re(t){const e=6e4*(new Date).getTimezoneOffset(),i=t&&Number(new Date(t).getTime()+e)||Date.now();return new Date(i-e).toISOString().split("T")[0]}function se(t,e={}){const{parent:i,prepend:n=!1,attributes:r,children:s,style:a,...o}=e,c=document.createElement(t);if(void 0!==r)for(const l in r)c.setAttribute(l,r[l]);if(Array.isArray(s))for(const l of s)c.append(l);if(void 0!==a&&Object.assign(c.style,a),Object.assign(c,o),void 0!==i){const t="string"==typeof i?document.querySelector(i):i;t&&t[n?"prepend":"append"](c)}return c}const ae={storageKeys:{userService:"car-service-current-user-data",memoization:"car-service-cache-initialized"},itemsPerPage:10,relativePageLinks:3};t=new WeakMap;const oe=new class{constructor(e){var i,n,r,s;l(this,t,void 0),r=e,o(i=this,n=t,"write to private field"),s?s.call(i,r):n.set(i,r),this.supported||console.warn("Cache API is not supported in this environment"),!sessionStorage.getItem(ae.storageKeys.memoization)&&this.supported&&(sessionStorage.setItem(ae.storageKeys.memoization,"true"),this.deleteCache())}get supported(){return!!window.caches}get databaseName(){return c(this,t)}async getCacheData(e){if(!this.supported)return Promise.resolve(null);const i=await caches.open(c(this,t)),n=await i.match(new Request(e));return n&&n.ok?await n.json():Promise.resolve(null)}async updateCacheData(e,i){if(!this.supported)return Promise.resolve();return(await caches.open(c(this,t))).put(new Request(e),new Response(JSON.stringify(i)))}async clearCacheData(e){if(!this.supported)return Promise.resolve(!1);return(await caches.open(c(this,t))).delete(new Request(e))}async deleteCache(){return this.supported?caches.delete(c(this,t)):Promise.resolve(!1)}}("CarServiceCacheDatabase"),ce="rgba(0 0 0 / 0.5)",le=3,de={default:{icon:"",color:"#555555",backgroundColor:"#f2f2f2"},info:{icon:"info",color:"#217ca3",backgroundColor:"#cfe8f3"},success:{icon:"check_circle",color:"#45874a",backgroundColor:"#e5f6e4"},warning:{icon:"error",color:"#b0822f",backgroundColor:"#fef5dc"},error:{icon:"cancel",color:"#b23c3a",backgroundColor:"#f2dede"}};e=new WeakMap,i=new WeakSet,n=function(t,e){switch(t){case"cube-flip":return se("div",{className:"notice-loading-cube-flip",style:{backgroundColor:e}});case"dots-zoom":return se("div",{className:"notice-loading-dots-zoom",children:[se("div",{className:"notice-loading-dots-zoom1",style:{backgroundColor:e}}),se("div",{className:"notice-loading-dots-zoom2",style:{backgroundColor:e}})]});case"line":return se("div",{className:"notice-loading-line",children:[se("div",{className:"notice-loading-line-rect1",style:{backgroundColor:e}}),se("div",{className:"notice-loading-line-rect2",style:{backgroundColor:e}}),se("div",{className:"notice-loading-line-rect3",style:{backgroundColor:e}}),se("div",{className:"notice-loading-line-rect4",style:{backgroundColor:e}}),se("div",{className:"notice-loading-line-rect5",style:{backgroundColor:e}})]});case"dots-spin":return se("div",{className:"notice-loading-spin-dots",children:[se("div",{className:"notice-loading-spin-dot1",style:{backgroundColor:e}}),se("div",{className:"notice-loading-spin-dot2",style:{backgroundColor:e}})]});case"dots":return se("div",{className:"notice-loading-dots",children:[se("div",{className:"notice-loading-dot1",style:{backgroundColor:e}}),se("div",{className:"notice-loading-dot2",style:{backgroundColor:e}}),se("div",{style:{backgroundColor:e}})]});case"cube-zoom":return se("div",{className:"notice-loading-cube-zoom",children:[se("div",{className:"notice-loading-cube-zoom-1",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-2",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-3",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-4",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-5",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-6",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-7",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-8",style:{backgroundColor:e}}),se("div",{className:"notice-loading-cube-zoom-9",style:{backgroundColor:e}})]});default:return null}},r=new WeakSet,s=function(t,e,i,n){const r=se("div",{className:"notice-modal-buttons"});switch(t){case"yes-no":return se("button",{parent:r,attributes:{"data-button-type":"info"},textContent:"Да",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),se("button",{parent:r,attributes:{"data-button-type":"danger"},textContent:"Не",onclick:t=>{e.remove(),"function"==typeof n&&n(t)}}),r;case"ok":return se("button",{parent:r,textContent:"Добре",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),r;case"ok-cancel":return se("button",{parent:r,textContent:"Добре",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),se("button",{parent:r,attributes:{"data-button-type":"danger"},textContent:"Отказ",onclick:t=>{e.remove(),"function"==typeof n&&n(t)}}),r;case"retry-cancel":return se("button",{parent:r,attributes:{"data-button-type":"info"},textContent:"Нов опит",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),se("button",{parent:r,attributes:{"data-button-type":"danger"},textContent:"Отказ",onclick:t=>{e.remove(),"function"==typeof n&&n(t)}}),r;default:return null}};const ue=new class{constructor(){l(this,i),l(this,r),l(this,e,document.body)}showLoading(t={}){const{type:r="dots",color:s="white",autoClose:a,title:o,titleColor:l,maskColor:u=ce}=t,h=se("div",{parent:c(this,e),className:"notice-loading notice-flex-center notice-fixed-all-page",id:"notice-loading"});se("div",{parent:h,className:"notice-mask notice-fixed-all-page",style:{backgroundColor:u}});const p=d(this,i,n).call(this,r,s)||d(this,i,n).call(this,"dots",s),f=se("div",{parent:h,className:"notice-flex-center notice-loading-main",children:[p]});o&&se("p",{parent:f,style:{color:l},textContent:o}),a&&setTimeout((()=>h.remove()),1e3*a)}hideLoading(){var t;null==(t=document.getElementById("notice-loading"))||t.remove()}showToast(t){const{text:i,type:n="default",autoClose:r=le,showClose:s=!0}=t;if(!i)return;const{icon:a,color:o,backgroundColor:l}=de[n]||de.default,d=document.getElementById("notice-toast")||se("div",{parent:c(this,e),className:"notice-toast",id:"notice-toast"}),u=se("div",{parent:d,className:"notice-toast-main notice-toast-main-active",id:`notice-toast-${ee()}`,style:{backgroundColor:l}}),h=se("div",{parent:u,className:"notice-toast-container",children:[se("p",{className:"notice-toast-text",style:{color:o},textContent:i})]});a&&se("i",{parent:h,prepend:!0,className:"material-icons notice-toast-icon",style:{color:o},textContent:a}),(s||!r)&&se("i",{parent:h,className:"material-icons notice-close-icon",textContent:"close",onclick:()=>f()});const p=!!Number(getComputedStyle(d).getPropertyValue("--_should-auto-close"));if(r||p){setTimeout((()=>f()),1e3*(r||le))}function f(){if(!u)return;const t=parseFloat(window.getComputedStyle(u).getPropertyValue("transition-duration"));u.classList.remove("notice-toast-main-active"),setTimeout((()=>{u&&u.remove(),d.children.length||d.remove()}),1e3*t)}}showModal(t={}){const{type:i="yes-no",color:n,backgroundColor:a,title:o,titleColor:l,message:u,messageColor:h,maskColor:p=ce,onConfirm:f,onCancel:m}=t,v=se("div",{parent:c(this,e),className:"notice-modal notice-flex-center notice-fixed-all-page",id:"notice-modal"});se("div",{parent:v,className:"notice-mask notice-fixed-all-page",style:{backgroundColor:p}});const g=se("div",{parent:v,className:"notice-flex-center notice-modal-main",style:{backgroundColor:a},children:[d(this,r,s).call(this,i,v,f,m)||d(this,r,s).call(this,"yes-no",v,f,m)]});u&&se("p",{parent:g,prepend:!0,style:{color:h||n},textContent:u}),o&&se("h2",{parent:g,prepend:!0,style:{color:l||n},textContent:o})}},he=document.querySelectorAll(".user-navigation"),pe=document.querySelectorAll(".guest-navigation");function fe(){ye()?(he.forEach((t=>t.removeAttribute("hidden"))),pe.forEach((t=>t.setAttribute("hidden","")))):(he.forEach((t=>t.setAttribute("hidden",""))),pe.forEach((t=>t.removeAttribute("hidden"))))}const me={LOGIN:"/login",REGISTER:"/users",LOGOUT:"/logout"},ve={CREATE_CAR:"/classes/Car",ALL_CARS:(t="")=>`/classes/Car?${Qt({order:"-createdAt",where:t})}`,CAR_BY_ID:t=>`/classes/Car/${t}`},ge={CREATE_REPAIR:"/classes/Repair",ALL_REPAIRS:t=>`/classes/Repair?${Qt({order:"-date",where:t})}`,REPAIR_BY_ID:t=>`/classes/Repair/${t}`};function ye(){return!!sessionStorage.getItem(ae.storageKeys.userService)}function _e(){var t;return JSON.parse(null!=(t=sessionStorage.getItem(ae.storageKeys.userService))?t:"null")}async function be(t){await oe.deleteCache().catch(console.error),sessionStorage.setItem(ae.storageKeys.userService,JSON.stringify(t))}async function $e(){await oe.deleteCache().catch(console.error),sessionStorage.removeItem(ae.storageKeys.userService)}async function we(t){const e="/cars",i=await oe.getCacheData(e),n=i&&i.find((e=>e.objectId===t));if(n)return n;const r=await Gt(ve.CAR_BY_ID(t));if(i){const t=[r,...i].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));await oe.updateCacheData(e,JSON.parse(JSON.stringify(t)))}return r}async function Ce(t){var e;const i=await Ft(ve.CAR_BY_ID(t)),n="/cars",r=(null!=(e=await oe.getCacheData(n))?e:[]).filter((e=>e.objectId!==t));return await(r.length>0?oe.updateCacheData(n,JSON.parse(JSON.stringify(r))):oe.clearCacheData(n)),i}const Ae=(t,e)=>{const i=Number(new Date(t.date))||Number(new Date(t.createdAt));return(Number(new Date(e.date))||Number(new Date(e.createdAt)))-i};async function xe(t,e){const i=JSON.stringify({car:{__type:"Pointer",className:"Car",objectId:t}}),n=`/cars/${t}/repairs`,r=await oe.getCacheData(n);let s;if(r?s=r:(({results:s}=await Gt(ge.ALL_REPAIRS(i))),await oe.updateCacheData(n,JSON.parse(JSON.stringify(s)))),!e)return{results:s,count:s.length};const a=10*(e-1),o=10*e;return{results:s.slice(a,o),count:s.length}}async function Ee(t,e){const i=`/cars/${t}/repairs`,n=await oe.getCacheData(i),r=n&&n.find((t=>t.objectId===e));if(r)return r;const s=await Gt(ge.REPAIR_BY_ID(e));if(n){const t=[s,...n].sort(Ae);await oe.updateCacheData(i,JSON.parse(JSON.stringify(t)))}return s}async function Se(t){const{results:e}=await xe(t),i=e.map((({objectId:t})=>Ft(ge.REPAIR_BY_ID(t)))),n=`/cars/${t}/repairs`;return await oe.clearCacheData(n),Promise.all(i)}const ke=document.getElementById("site-content")||document.body,Ne=document.querySelector("meta[name=viewport]"),Ie=["/user/login","/user/register"],Pe=["/cars","/repairs"];function Re(t,e={}){const{container:i,...n}=e,r=i&&(i instanceof HTMLElement||i instanceof DocumentFragment)?i:"string"==typeof i?document.querySelector(i):null;return qt(t,r||ke,n)}const Te=(t,e)=>t.length>0?Le(t,e):Ct`<p class="empty">Нямаш добавени автомобили!</p>`,Le=(t,e)=>Ct`<table role="table"><thead role="rowgroup"><tr role="row"><th role="columnheader">Рама</th><th role="columnheader">Pегистрационен &numero;</th><th role="columnheader">Марка / Модел</th><th role="columnheader">Двигател</th><th role="columnheader">Име на клиента</th><th role="columnheader">Ремонти</th><th role="columnheader">Редакция</th><th role="columnheader">Изтриване</th></tr></thead><tbody role="rowgroup">${t.map((t=>Oe(t,e)))}</tbody></table>`,Oe=(t,e)=>Ct`<tr role="row"><td role="cell" data-cell-content="Рама">${t.vin}</td><td role="cell" data-cell-content="Pегистрационен &numero;">${t.registration}</td><td role="cell" data-cell-content="Марка / Модел">${t.make}</td><td role="cell" data-cell-content="Двигател">${t.engine}</td><td role="cell" data-cell-content="Име на клиента">${t.customerName}</td><td role="cell" data-cell-content="Ремонти"><div class="buttons"><a role="button" data-button-type="info" href="${M.base()}/cars/${t.objectId}/repairs"><i class="material-icons">car_repair</i></a></div></td><td role="cell" data-cell-content="Редакция"><div class="buttons"><a role="button" href="${M.base()}/cars/${t.objectId}/edit"><i class="material-icons">edit</i></a></div></td><td role="cell" data-cell-content="Изтриване"><div class="buttons"><button data-button-type="danger" @click=${i=>e(i,t)}><i class="material-icons">delete_forever</i></button></div></td></tr>`,De=(t,e,i,n)=>{const r=(r,s)=>{const a=t===s||s<1||s>e,o="number"==typeof r&&t===s,c=a?"#":(t=>{const e=Qt({filter:i,query:n,page:t.toString()});return`${window.location.pathname}?${e}`})(s);return Ct`<a .href=${c} .className=${`${a?"not-selectable":""} ${o?"active":""}`}>${r}</a>`};const s=r(Ct`<i class="material-icons">keyboard_double_arrow_left</i>`,1),a=r(Ct`<i class="material-icons">chevron_left</i>`,t-1),o=function(){const i=Math.floor(ae.relativePageLinks/2),n=Math.min(Math.max(1,t-i),Math.max(1,e-ae.relativePageLinks+1)),r=Math.max(Math.min(e,t+i),Math.min(e,ae.relativePageLinks)),s=Math.min(r-n+1,e);return Array.from({length:s},((t,e)=>n+e))}().map((t=>r(t,t))),c=r(Ct`<i class="material-icons">chevron_right</i>`,t+1),l=r(Ct`<i class="material-icons">keyboard_double_arrow_right</i>`,e);return Ct`${s}${a}${o}${c}${l}`},Ue=t=>t.length>0?je(t):Ct`<p class="empty">Нямаш завършени ремонти!</p>`,je=t=>Ct`<table role="table"><thead role="rowgroup"><tr role="row"><th role="columnheader">Извършен на</th><th role="columnheader">Километри</th><th role="columnheader">Детайли по ремонта</th></tr></thead><tbody role="rowgroup">${t.map(Me)}</tbody></table>`,Me=t=>Ct`<tr role="row"><td role="cell" data-cell-content="Извършен на">${ie(t.date)}</td><td role="cell" data-cell-content="Километри">${t.km}</td><td role="cell" data-cell-content="Детайли по ремонта"><div class="buttons"><a role="button" data-button-type="info" href="${M.base()}/cars/${t.car.objectId}/repairs/${t.objectId}">Детайли</a></div></td></tr>`,He=(t,e)=>{const i=(i,n)=>{const r=t===n||n<1||n>e,s="number"==typeof i&&t===n,a=r?"#":(t=>{const e=Qt({page:t.toString()});return`${window.location.pathname}?${e}`})(n);return Ct`<a .href=${a} .className=${`${r?"not-selectable":""} ${s?"active":""}`}>${i}</a>`};const n=i(Ct`<i class="material-icons">keyboard_double_arrow_left</i>`,1),r=i(Ct`<i class="material-icons">chevron_left</i>`,t-1),s=function(){const i=Math.floor(ae.relativePageLinks/2),n=Math.min(Math.max(1,t-i),Math.max(1,e-ae.relativePageLinks+1)),r=Math.max(Math.min(e,t+i),Math.min(e,ae.relativePageLinks)),s=Math.min(r-n+1,e);return Array.from({length:s},((t,e)=>n+e))}().map((t=>i(t,t))),a=i(Ct`<i class="material-icons">chevron_right</i>`,t+1),o=i(Ct`<i class="material-icons">keyboard_double_arrow_right</i>`,e);return Ct`${n}${r}${s}${a}${o}`};async function qe(t){t.preventDefault();const e=t.target,[i,n]=te(e);try{n(!0),ue.showLoading({type:"cube-zoom"}),await async function(t){const e=await Yt(me.LOGIN,t);return await be({username:t.username,id:e.objectId,token:e.sessionToken}),fe(),e}(i),M.redirect("/cars")}catch(r){const t=r instanceof Error?r.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{n(!1),ue.hideLoading(),e.reset()}}function Ve(t){t.preventDefault();const e=t.target,i=e.previousElementSibling,n="password"===i.type?"text":"password";i.setAttribute("type",n),e.textContent="password"===n?"visibility_off":"visibility"}async function ze(t){t.preventDefault();const e=t.target,[{username:i,password:n,repass:r},s]=te(e);if(n===r)try{s(!0),ue.showLoading({type:"cube-zoom"}),await async function(t){const e=await Yt(me.REGISTER,t);return await be({username:t.username,id:e.objectId,token:e.sessionToken}),fe(),e}({username:i,password:n}),M.redirect("/cars")}catch(a){const t=a instanceof Error?a.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{s(!1),ue.hideLoading(),e.reset()}else ue.showToast({text:"Паролите не съвпадат!",type:"warning"})}function Be(t){var e,i,n;t.preventDefault();const r=t.target,s=r.previousElementSibling,a=null==(n=null==(i=null==(e=r.parentElement)?void 0:e.parentElement)?void 0:i.nextElementSibling)?void 0:n.lastElementChild,o="password"===s.type?"text":"password";s.setAttribute("type",o),a.setAttribute("type",o),r.textContent="password"===o?"visibility_off":"visibility"}const Je=2;class Ke{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const We=(t,e)=>{var i,n;const r=t._$AN;if(void 0===r)return!1;for(const s of r)null===(n=(i=s)._$AO)||void 0===n||n.call(i,e,!1),We(s,e);return!0},Ge=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===(null==i?void 0:i.size))},Ye=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),Xe(e)}};function Ze(t){void 0!==this._$AN?(Ge(this),this._$AM=t,Ye(this)):this._$AM=t}function Fe(t,e=!1,i=0){const n=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(e)if(Array.isArray(n))for(let s=i;s<n.length;s++)We(n[s],!1),Ge(n[s]);else null!=n&&(We(n,!1),Ge(n));else We(this,t)}const Xe=t=>{var e,i,n,r;t.type==Je&&(null!==(e=(n=t)._$AP)&&void 0!==e||(n._$AP=Fe),null!==(i=(r=t)._$AQ)&&void 0!==i||(r._$AQ=Ze))};class Qe extends Ke{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),Ye(this),this.isConnected=t._$AU}_$AO(t,e=!0){var i,n;t!==this.isConnected&&(this.isConnected=t,t?null===(i=this.reconnected)||void 0===i||i.call(this):null===(n=this.disconnected)||void 0===n||n.call(this)),e&&(We(this,t),Ge(this))}setValue(t){if(void 0===this._$Ct.strings)this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}class ti{constructor(t){this.G=t}disconnect(){this.G=void 0}reconnect(t){this.G=t}deref(){return this.G}}class ei{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){var t;null!==(t=this.Y)&&void 0!==t||(this.Y=new Promise((t=>this.Z=t)))}resume(){var t;null===(t=this.Z)||void 0===t||t.call(this),this.Y=this.Z=void 0}}const ii=t=>{return!(e=t,null===e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof t.then);var e},ni=1073741823;const ri=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends Qe{constructor(){super(...arguments),this._$C_t=ni,this._$Cwt=[],this._$Cq=new ti(this),this._$CK=new ei}render(...t){var e;return null!==(e=t.find((t=>!ii(t))))&&void 0!==e?e:At}update(t,e){const i=this._$Cwt;let n=i.length;this._$Cwt=e;const r=this._$Cq,s=this._$CK;this.isConnected||this.disconnected();for(let a=0;a<e.length&&!(a>this._$C_t);a++){const t=e[a];if(!ii(t))return this._$C_t=a,t;a<n&&t===i[a]||(this._$C_t=ni,n=0,Promise.resolve(t).then((async e=>{for(;s.get();)await s.get();const i=r.deref();if(void 0!==i){const n=i._$Cwt.indexOf(t);n>-1&&n<i._$C_t&&(i._$C_t=n,i.setValue(e))}})))}return At}disconnected(){this._$Cq.disconnect(),this._$CK.pause()}reconnected(){this._$Cq.reconnect(this),this._$CK.resume()}});function si(t){t.preventDefault();const e=document.getElementById("search-options").value.trim(),i=document.getElementById("search-input").value.trim();e&&i?M.redirect(`/cars?${Qt({filter:e,query:i})}`):M.redirect("/cars")}async function ai(t,e){t.preventDefault();if(await new Promise((t=>ue.showModal({message:`Сигурен ли си, че искаш да изтриеш автомобила на ${e.customerName} - "${e.registration}"`,onConfirm:()=>t(!0),onCancel:()=>t(!1)}))))try{ue.showLoading(),await Promise.all([Se(e.objectId),Ce(e.objectId)]),ue.showToast({text:`Успешно изтрихте автомобила на ${e.customerName} - "${e.registration}"`,type:"info"})}catch(i){const t=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{ue.hideLoading(),M.redirect("/cars")}}async function oi(t){t.preventDefault();const e=t.target,[i,n]=te(e);try{n(!0),ue.showLoading(),await async function(t){var e;const{id:i}=_e(),n={owner:Object.freeze({__type:"Pointer",className:"_User",objectId:i})},r=Object.assign({},t,n),s=await Yt(ve.CREATE_CAR,r),a="/cars",o=null!=(e=await oe.getCacheData(a))?e:[],c={...r,...s},l=[c,...o].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));return await oe.updateCacheData(a,JSON.parse(JSON.stringify(l))),c}(i),ue.showToast({text:`Успешно създадохте автомобил на ${i.customerName} - "${i.registration}"`,type:"success"})}catch(r){const t=r instanceof Error?r.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{n(!1),ue.hideLoading(),e.reset(),M.redirect("/cars")}}null==(a=document.getElementById("logout-button"))||a.addEventListener("click",(async function(t){if(t.preventDefault(),await new Promise((t=>ue.showModal({message:"Сигурен ли си, че искаш да излезеш?",title:"Изход",onConfirm:()=>t(!0),onCancel:()=>t(!1)}))))try{ue.showLoading({type:"cube-zoom"}),await async function(){const t=await Yt(me.LOGOUT,{});return await $e(),fe(),t}(),M.redirect("/user/login")}catch(e){const t=e instanceof Error?e.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{ue.hideLoading()}})),M.base("/Car-Service"),M((function(t,e){fe(),Object.assign(t,{root:ke,render:Re}),function(t){const{origin:e,pathname:i,search:n}=window.location,r=e+t.pathname;Pe.some((t=>i.endsWith(t)))&&r!==e+i&&(t.state.prev=i+n)}(t),function(t){const{path:e}=t,i="interactive-widget=resizes-content";if(!Ne){const t=document.createElement("meta");return t.name="viewport",t.content=i,void document.head.appendChild(t)}const n=Ne.content.split(",").map((t=>t.trim()));Ie.includes(e)&&!n.includes(i)?n.push(i):!Ie.includes(e)&&n.includes(i)&&n.splice(n.indexOf(i),1);Ne.content=n.join(", ")}(t),function(t){if(!t)return;if(!document.startViewTransition)return void t();document.startViewTransition(t)}((()=>{const i=ye(),n=!i&&!Ie.includes(t.path),r=i&&Ie.includes(t.path);n?t.page.redirect(Ie[0]):r?window.history.back():e()}))})),M("/user/login",(function(t){t.render(Ct`<section id="auth-page"><form @submit=${qe}><fieldset class="input-fields"><legend>Вход</legend><div class="field"><label for="user__username">Потребителско име: <span class='required'>*</span></label><input name="username" id="user__username" type="text" placeholder="Въведи потребителско име..." required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="user__password">Парола: <span class='required'>*</span></label><div class="password-field"><input name="password" id="user__password" type="password" placeholder="Въведи парола..." required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /><i class="material-icons eye-icon" @click=${Ve}>visibility_off</i></div></div><div class="buttons"><input role="button" data-button-type="info" type="submit" value="Вход" /></div><div class="form-link"><span>Все още нямаш профил? <a href="${M.base()}/user/register">Регистрация</a></span></div></fieldset></form></section>`)})),M("/user/register",(function(t){t.render(Ct`<section id="auth-page"><form @submit=${ze}><fieldset class="input-fields"><legend>Регистрация</legend><div class="field"><label for="user__username">Потребителско име: <span class='required'>*</span></label><input name="username" id="user__username" type="text" placeholder="Въведи потребителско име..." required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="user__password">Парола: <span class='required'>*</span></label><div class="password-field"><input name="password" id="user__password" type="password" placeholder="Въведи парола..." required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /><i class="material-icons eye-icon" @click=${Be}>visibility_off</i></div></div><div class="field"><label for="user__repass">Потвърди паролата: <span class='required'>*</span></label><input name="repass" id="user__repass" type="password" placeholder="Повтори паролата..." required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="buttons"><input role="button" data-button-type="info" type="submit" value="Регистрация" /></div><div class="form-link"><span>Вече имаш създаден профил? <a href="${M.base()}/user/login">Вход</a></span></div></fieldset></form></section>`)})),M("/cars",(function(t){const{page:e="1",filter:i="",query:n=""}=Xt(t.querystring);t.render(ri((async()=>{const t=await async function(t,e,i){try{const{results:n,count:r}=await async function(t,e,i){const n=e&&i?JSON.stringify({[e]:{$regex:`(?i)${i}`}}):null,r="/cars",s=await oe.getCacheData(r);let a;if(n?({results:a}=await Gt(ve.ALL_CARS(n))):(a=null!=s?s:(await Gt(ve.ALL_CARS())).results,s||await oe.updateCacheData(r,a)),!t)return{results:a,count:a.length};const o=(t-1)*ae.itemsPerPage,c=t*ae.itemsPerPage;return{results:a.slice(o,c),count:a.length}}(t,e,i);return{cars:n,carsCount:r,pageNumber:t,searchCategory:e,searchQuery:i}}catch(n){const t=n instanceof Error?n.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"}),M.redirect("/")}finally{ue.hideLoading()}}(Number(e)||1,i,n);if(t)return(t=>{const{cars:e,carsCount:i,pageNumber:n,searchCategory:r,searchQuery:s,onSearch:a,onDelete:o}=t,c=Math.max(Math.ceil(i/ae.itemsPerPage),1);return Ct`<section id="catalog-page"><form autocomplete="off"><fieldset><legend>Всички автомобили</legend><fieldset class="search"><label for="search-options" id="search-label" aria-hidden="true">Търсачка</label><select id="search-options" aria-labelledby="search-label"><option value="registration" .selected=${"registration"===r}>Регистрационен &numero;</option><option value="make" .selected=${"make"===r}>Марка</option><option value="engine" .selected=${"engine"===r}>Двигател</option><option value="customerName" .selected=${"customerName"===r}>Име на клиента</option></select><input id="search-input" type="search" placeholder="Въведи..." .value=${s} /><button @click=${a}>Търси</button></fieldset>${Te(e,o)}<fieldset class="pagination">${De(n,c,r,s)}</fieldset></fieldset></form></section>`})({...t,onSearch:si,onDelete:ai})})(),ue.showLoading()))})),M("/cars/create",(function(t){const{prev:e="/cars"}=t.state;t.render((t=>{const{prev:e,onSubmit:i}=t;return Ct`<section id="create-page"><form @submit=${i} autocomplete="off"><fieldset><legend>Добави автомобил</legend><fieldset class="input-fields"><div class="field"><label for="car__vin">VIN:</label><input name="vin" id="car__vin" type="text" /></div><div class="field"><label for="car__registration">Pегистрационен &numero;: <span class='required'>*</span></label><input name="registration" id="car__registration" type="text" required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="car__make">Марка / Модел:</label><input name="make" id="car__make" type="text" /></div><div class="field"><label for="car__engine">Двигател:</label><input name="engine" id="car__engine" type="text" /></div><div class="field"><label for="car__customer">Име на клиента: <span class='required'>*</span></label><input name="customerName" id="car__customer" type="text" required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div></fieldset><div class="buttons"><button data-button-type="success" type="submit">Добави</button><a role="button" data-button-type="danger" href="${M.base()+e}">Отказ</a></div></fieldset></form></section>`})({prev:e,onSubmit:oi}))})),M("/cars/:carId/edit",(function(t){const{carId:e}=t.params,{prev:i="/cars"}=t.state;t.render(ri((async()=>{const t=await async function(t){try{return await we(t)}catch(e){const t=e instanceof Error?e.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"}),M.redirect("/cars")}finally{ue.hideLoading()}}(e);if(t)return(t=>{const{car:e,prev:i,onSubmit:n}=t;return Ct`<section id="edit-page"><form @submit=${n} autocomplete="off"><fieldset><legend>Редактирай автомобил</legend><fieldset class="input-fields"><div class="field"><label for="car__vin">VIN:</label><input name="vin" id="car__vin" type="text" .value=${e.vin} /></div><div class="field"><label for="car__registration">Pегистрационен &numero;: <span class='required'>*</span></label><input name="registration" id="car__registration" type="text" .value=${e.registration} required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="car__make">Марка / Модел:</label><input name="make" id="car__make" type="text" .value=${e.make} /></div><div class="field"><label for="car__engine">Двигател:</label><input name="engine" id="car__engine" type="text" .value=${e.engine} /></div><div class="field"><label for="car__customer">Име на клиента: <span class='required'>*</span></label><input name="customerName" id="car__customer" type="text" .value=${e.customerName} required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div></fieldset><div class="buttons"><button data-button-type="info" type="submit">Запази промените</button><a role="button" data-button-type="danger" href="${M.base()+i}">Отказ</a></div></fieldset></form></section>`})({car:t,prev:i,onSubmit:e=>async function(t,e){t.preventDefault();const i=t.target,[n,r]=te(i);try{r(!0),ue.showLoading(),await async function(t,e){var i;const n=await Zt(ve.CAR_BY_ID(t),e),r="/cars",s=null!=(i=await oe.getCacheData(r))?i:[],a=s.findIndex((e=>e.objectId===t)),o={...-1!==a?s.splice(a,1)[0]:{},...e,...n},c=[o,...s].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));return await oe.updateCacheData(r,JSON.parse(JSON.stringify(c))),o}(e.objectId,n),ue.showToast({text:`Успешно редактирахте ремонт на ${n.customerName} - "${n.registration}"`,type:"info"})}catch(s){const t=s instanceof Error?s.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{r(!1),ue.hideLoading(),i.reset(),M.redirect("/cars")}}(e,t)})})(),ue.showLoading()))})),M("/cars/:carId/repairs",(function(t){const{carId:e}=t.params,{page:i="1"}=Xt(t.querystring),{prev:n="/cars"}=t.state;t.render(ri((async()=>{const t=await async function(t,e){try{const[{results:i,count:n},r]=await Promise.all([xe(t,e),we(t)]);return{repairs:i,repairsCount:n,car:r,pageNumber:e}}catch(i){const t=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"}),M.redirect("/cars")}finally{ue.hideLoading()}}(e,Number(i)||1);if(t)return(t=>{const{repairs:e,repairsCount:i,car:n,pageNumber:r,prev:s}=t,a=Math.max(Math.ceil(i/ae.itemsPerPage),1);return Ct`<section id="catalog-page"><form autocomplete="off"><fieldset><legend>Всичките ремонти на ${n.customerName} - "${n.registration}"</legend><fieldset class="search"><div class="buttons"><a role="button" data-button-type="success" href="${M.base()}/cars/${n.objectId}/repairs/create">Добави ремонт</a><a role="button" href="${M.base()+s}">Назад</a></div></fieldset>${Ue(e)}<fieldset class="pagination">${He(r,a)}</fieldset></fieldset></form></section>`})({...t,prev:n})})(),ue.showLoading()))})),M("/cars/:carId/repairs/create",(function(t){const{carId:e}=t.params,{prev:i=`/cars/${e}/repairs`}=t.state;t.render((t=>{const{prev:e,onSubmit:i}=t;return Ct`<section id="create-page"><form @submit=${i} autocomplete="off"><fieldset><legend>Добави ремонт</legend><fieldset class="input-fields"><div class="field"><label for="repair__date">Датa на ремонта: <span class='required'>*</span></label><input name="date" id="repair__date" type="date" .value="${re()}" style="cursor: pointer;" required @click="${({target:t})=>t.showPicker()}" @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="repair__km">Километри: <span class='required'>*</span></label><input name="km" id="repair__km" type="number" required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="repair__profit">Платена сума:</label><input name="profit" id="repair__profit" type="text" /></div><div class="field"><label for="repair__description">Забележка:</label><textarea data-scrollbar name="description" id="repair__description" @keyup="${({target:t})=>{t.scrollHeight>t.clientHeight&&t.style.setProperty("height",t.scrollHeight+"px")}}"></textarea></div></fieldset><div class="buttons"><button data-button-type="success" type="submit">Добави</button><a role="button" data-button-type="danger" href="${M.base()+e}">Отказ</a></div></fieldset></form></section>`})({carId:e,prev:i,onSubmit:t=>async function(t,e){t.preventDefault();const i=t.target,[n,r]=te(i);n.date=ne(n.date);try{r(!0),ue.showLoading(),await async function(t,e){var i;const{id:n}=_e(),r={owner:Object.freeze({__type:"Pointer",className:"_User",objectId:n})},s={car:Object.freeze({__type:"Pointer",className:"Car",objectId:t})},a=Object.assign({},e,r,s),o=await Yt(ge.CREATE_REPAIR,a),c=`/cars/${t}/repairs`,l=null!=(i=await oe.getCacheData(c))?i:[],d={...a,...o},u=[d,...l].sort(Ae);return await oe.updateCacheData(c,JSON.parse(JSON.stringify(u))),d}(e,n),ue.showToast({text:"Успешно добавихте ремонт",type:"success"})}catch(s){const t=s instanceof Error?s.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{r(!1),ue.hideLoading(),i.reset(),M.redirect(`/cars/${e}/repairs`)}}(t,e)}))})),M("/cars/:carId/repairs/:repairId",(function(t){const{carId:e,repairId:i}=t.params,{prev:n=`/cars/${e}/repairs`}=t.state;t.render(ri((async()=>{const t=await async function(t,e){try{return await Ee(t,e)}catch(i){const e=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:e,type:"error"}),M.redirect(`/cars/${t}/repairs`)}finally{ue.hideLoading()}}(e,i);if(t)return(t=>{const{repair:e,prev:i,onDelete:n}=t;return Ct`<section id="details-page"><form autocomplete="off"><fieldset><legend>Детайли по ремонта</legend><fieldset class="input-fields"><legend>Обща информация</legend><div class="field"><label for="repair__date">Датa на ремонта:</label><input disabled name="date" id="repair__date" .value=${ie(e.date)} /></div><div class="field"><label for="repair__km">Километри:</label><input disabled name="km" id="repair__km" .value=${e.km} /></div><div class="field"><label for="repair__profit">Платена сума:</label><input disabled name="profit" id="repair__profit" .value=${e.profit} /></div></fieldset><fieldset disabled class="input-fields"><legend>Информация за ремонта</legend><div class="field"><label for="repair__description">Забележка:</label><textarea data-scrollbar name="description" id="repair__description" .value=${e.description}></textarea></div></fieldset><div class="buttons"><a role="button" data-button-type="info" href="${M.base()}/cars/${e.car.objectId}/repairs/${e.objectId}/edit">Редактирай</a><a role="button" href="${M.base()+i}">Назад</a><button data-button-type="danger" @click=${n}>Изтрий</button></div></fieldset></form></section>`})({repair:t,prev:n,onDelete:e=>async function(t,e){t.preventDefault();if(!(await new Promise((t=>ue.showModal({message:`Сигурен ли си, че искаш да изтриеш ремонт от дата "${e.date}"`,onConfirm:()=>t(!0),onCancel:()=>t(!1)})))))return;try{ue.showLoading(),await async function(t,e){var i;const n=await Ft(ge.REPAIR_BY_ID(e)),r=`/cars/${t}/repairs`,s=(null!=(i=await oe.getCacheData(r))?i:[]).filter((t=>t.objectId!==e));return await(s.length>0?oe.updateCacheData(r,JSON.parse(JSON.stringify(s))):oe.clearCacheData(r)),n}(e.car.objectId,e.objectId),ue.showToast({text:"Успешно изтрихте ремонта",type:"info"})}catch(i){const t=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{ue.hideLoading(),M.redirect(`/cars/${e.car.objectId}/repairs`)}}(e,t)})})(),ue.showLoading()))})),M("/cars/:carId/repairs/:repairId/edit",(function(t){const{carId:e,repairId:i}=t.params;t.render(ri((async()=>{const t=await async function(t,e){try{return await Ee(t,e)}catch(i){const e=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:e,type:"error"}),M.redirect(`/cars/${t}/repairs`)}finally{ue.hideLoading()}}(e,i);if(t)return(t=>{const{repair:e,onSubmit:i}=t;return Ct`<section id="edit-page"><form @submit=${i} autocomplete="off"><fieldset><legend>Редактирай ремонт</legend><fieldset class="input-fields"><div class="field"><label for="repair__date">Датa на ремонта: <span class='required'>*</span></label><input name="date" id="repair__date" type="date" .value=${re(e.date)} style="cursor: pointer;" required @click="${({target:t})=>t.showPicker()}" @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="repair__km">Километри: <span class='required'>*</span></label><input name="km" id="repair__km" type="number" .value=${e.km} required @invalid="${({target:t})=>t.setCustomValidity("Полето е задължително!")}" @input="${({target:t})=>t.setCustomValidity("")}" /></div><div class="field"><label for="repair__profit">Платена сума:</label><input name="profit" id="repair__profit" type="text" .value=${e.profit} /></div><div class="field"><label for="repair__description">Забележка:</label><textarea data-scrollbar name="description" id="repair__description" .value=${e.description} @keyup="${({target:t})=>{t.scrollHeight>t.clientHeight&&t.style.setProperty("height",t.scrollHeight+"px")}}"></textarea></div></fieldset><div class="buttons"><button data-button-type="success" type="submit">Запази промените</button><a role="button" data-button-type="danger" href="${M.base()}/cars/${e.car.objectId}/repairs/${e.objectId}">Отказ</a></div></fieldset></form></section>`})({repair:t,onSubmit:e=>async function(t,e){t.preventDefault();const i=t.target,[n,r]=te(i);n.date=ne(n.date);try{r(!0),ue.showLoading(),await async function(t,e,i){var n;const r=await Zt(ge.REPAIR_BY_ID(e),i),s=`/cars/${t}/repairs`,a=null!=(n=await oe.getCacheData(s))?n:[],o=a.findIndex((t=>t.objectId===e)),c={...-1!==o?a.splice(o,1)[0]:{},...i,...r},l=[c,...a].sort(Ae);return await oe.updateCacheData(s,JSON.parse(JSON.stringify(l))),c}(e.car.objectId,e.objectId,n),ue.showToast({text:`Успешно редактирахте ремонт от дата "${n.date}"`,type:"info"})}catch(s){const t=s instanceof Error?s.message:"Възникна грешка, моля опитайте по-късно";ue.showToast({text:t,type:"error"})}finally{r(!1),ue.hideLoading(),i.reset(),M.redirect(`/cars/${e.car.objectId}/repairs/${e.objectId}`)}}(e,t)})})(),ue.showLoading()))})),M.start();
