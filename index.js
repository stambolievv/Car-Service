/**
 * @name car-service
 * @description Easy and convenient way to register cars and their repairs.
 *
 * @version 1.0.0
 * @author Deyan 'stambolievv' Stamboliev
 * @license Apache-2.0
 */
var t,e,i,n,s,r,o,a=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},c=(t,e,i)=>(a(t,e,"read from private field"),i?i.call(t):e.get(t)),l=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},d=(t,e,i)=>(a(t,e,"access private method"),i);!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var u=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},h=x,p=y,f=function(t){return _(y(t))},m=_,v=A,g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function y(t){for(var e,i=[],n=0,s=0,r="";null!=(e=g.exec(t));){var o=e[0],a=e[1],c=e.index;if(r+=t.slice(s,c),s=c+o.length,a)r+=a[1];else{r&&(i.push(r),r="");var l=e[2],d=e[3],u=e[4],h=e[5],p=e[6],f=e[7],m="+"===p||"*"===p,v="?"===p||"*"===p,y=l||"/",_=u||h||(f?".*":"[^"+y+"]+?");i.push({name:d||n++,prefix:l||"",delimiter:y,optional:v,repeat:m,pattern:$(_)})}}return s<t.length&&(r+=t.substr(s)),r&&i.push(r),i}function _(t){for(var e=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(e[i]=new RegExp("^"+t[i].pattern+"$"));return function(i){for(var n="",s=i||{},r=0;r<t.length;r++){var o=t[r];if("string"!=typeof o){var a,c=s[o.name];if(null==c){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to be defined')}if(u(c)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var l=0;l<c.length;l++){if(a=encodeURIComponent(c[l]),!e[r].test(a))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but received "'+a+'"');n+=(0===l?o.prefix:o.delimiter)+a}}else{if(a=encodeURIComponent(c),!e[r].test(a))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but received "'+a+'"');n+=o.prefix+a}}else n+=o}return n}}function b(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function $(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function w(t,e){return t.keys=e,t}function C(t){return t.sensitive?"":"i"}function A(t,e){for(var i=(e=e||{}).strict,n=!1!==e.end,s="",r=t[t.length-1],o="string"==typeof r&&/\/$/.test(r),a=0;a<t.length;a++){var c=t[a];if("string"==typeof c)s+=b(c);else{var l=b(c.prefix),d=c.pattern;c.repeat&&(d+="(?:"+l+d+")*"),s+=d=c.optional?l?"(?:"+l+"("+d+"))?":"("+d+")?":l+"("+d+")"}}return i||(s=(o?s.slice(0,-2):s)+"(?:\\/(?=$))?"),s+=n?"$":i&&o?"":"(?=\\/|$)",new RegExp("^"+s,C(e))}function x(t,e,i){return u(e=e||[])?i||(i={}):(i=e,e=[]),t instanceof RegExp?function(t,e){var i=t.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return w(t,e)}(t,e):u(t)?function(t,e,i){for(var n=[],s=0;s<t.length;s++)n.push(x(t[s],e,i).source);return w(new RegExp("(?:"+n.join("|")+")",C(i)),e)}(t,e,i):function(t,e,i){for(var n=y(t),s=A(n,i),r=0;r<n.length;r++)"string"!=typeof n[r]&&e.push(n[r]);return w(s,e)}(t,e,i)}h.parse=p,h.compile=f,h.tokensToFunction=m,h.tokensToRegExp=v;var k,E="undefined"!=typeof document,S="undefined"!=typeof window,N="undefined"!=typeof history,I="undefined"!=typeof process,P=E&&document.ontouchstart?"touchstart":"click",R=S&&!(!window.history.location&&!window.location);function L(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function T(t,e){if("function"==typeof t)return T.call(this,"*",t);if("function"==typeof e)for(var i=new D(t,null,this),n=1;n<arguments.length;++n)this.callbacks.push(i.middleware(arguments[n]));else"string"==typeof t?this["string"==typeof e?"redirect":"show"](t,e):this.start(t)}function O(t){if(!t.handled){var e=this,i=e._window;(e._hashbang?R&&this._getBase()+i.location.hash.replace("#!",""):R&&i.location.pathname+i.location.search)!==t.canonicalPath&&(e.stop(),t.handled=!1,R&&(i.location.href=t.canonicalPath))}}function U(t,e,i){var n=this.page=i||T,s=n._window,r=n._hashbang,o=n._getBase();"/"===t[0]&&0!==t.indexOf(o)&&(t=o+(r?"#!":"")+t);var a=t.indexOf("?");this.canonicalPath=t;var c=new RegExp("^"+o.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=t.replace(c,"")||"/",r&&(this.path=this.path.replace("#!","")||"/"),this.title=E&&s.document.title,this.state=e||{},this.state.path=t,this.querystring=~a?n._decodeURLEncodedURIComponent(t.slice(a+1)):"",this.pathname=n._decodeURLEncodedURIComponent(~a?t.slice(0,a):t),this.params={},this.hash="",!r){if(!~this.path.indexOf("#"))return;var l=this.path.split("#");this.path=this.pathname=l[0],this.hash=n._decodeURLEncodedURIComponent(l[1])||"",this.querystring=this.querystring.split("#")[0]}}function D(t,e,i){var n=this.page=i||j,s=e||{};s.strict=s.strict||n._strict,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=h(this.path,this.keys=[],s)}L.prototype.configure=function(t){var e=t||{};this._window=e.window||S&&window,this._decodeURLComponents=!1!==e.decodeURLComponents,this._popstate=!1!==e.popstate&&S,this._click=!1!==e.click&&E,this._hashbang=!!e.hashbang;var i=this._window;this._popstate?i.addEventListener("popstate",this._onpopstate,!1):S&&i.removeEventListener("popstate",this._onpopstate,!1),this._click?i.document.addEventListener(P,this.clickHandler,!1):E&&i.document.removeEventListener(P,this.clickHandler,!1),this._hashbang&&S&&!N?i.addEventListener("hashchange",this._onpopstate,!1):S&&i.removeEventListener("hashchange",this._onpopstate,!1)},L.prototype.base=function(t){if(0===arguments.length)return this._base;this._base=t},L.prototype._getBase=function(){var t=this._base;if(t)return t;var e=S&&this._window&&this._window.location;return S&&this._hashbang&&e&&"file:"===e.protocol&&(t=e.pathname),t},L.prototype.strict=function(t){if(0===arguments.length)return this._strict;this._strict=t},L.prototype.start=function(t){var e=t||{};if(this.configure(e),!1!==e.dispatch){var i;if(this._running=!0,R){var n=this._window.location;i=this._hashbang&&~n.hash.indexOf("#!")?n.hash.substr(2)+n.search:this._hashbang?n.search+n.hash:n.pathname+n.search+n.hash}this.replace(i,null,!0,e.dispatch)}},L.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var t=this._window;this._click&&t.document.removeEventListener(P,this.clickHandler,!1),S&&t.removeEventListener("popstate",this._onpopstate,!1),S&&t.removeEventListener("hashchange",this._onpopstate,!1)}},L.prototype.show=function(t,e,i,n){var s=new U(t,e,this),r=this.prevContext;return this.prevContext=s,this.current=s.path,!1!==i&&this.dispatch(s,r),!1!==s.handled&&!1!==n&&s.pushState(),s},L.prototype.back=function(t,e){var i=this;if(this.len>0){var n=this._window;N&&n.history.back(),this.len--}else t?setTimeout((function(){i.show(t,e)})):setTimeout((function(){i.show(i._getBase(),e)}))},L.prototype.redirect=function(t,e){var i=this;"string"==typeof t&&"string"==typeof e&&T.call(this,t,(function(t){setTimeout((function(){i.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){i.replace(t)}),0)},L.prototype.replace=function(t,e,i,n){var s=new U(t,e,this),r=this.prevContext;return this.prevContext=s,this.current=s.path,s.init=i,s.save(),!1!==n&&this.dispatch(s,r),s},L.prototype.dispatch=function(t,e){var i=0,n=0,s=this;function r(){var e=s.callbacks[i++];if(t.path===s.current)return e?void e(t,r):O.call(s,t);t.handled=!1}e?function t(){var i=s.exits[n++];if(!i)return r();i(e,t)}():r()},L.prototype.exit=function(t,e){if("function"==typeof t)return this.exit("*",t);for(var i=new D(t,null,this),n=1;n<arguments.length;++n)this.exits.push(i.middleware(arguments[n]))},L.prototype.clickHandler=function(t){if(1===this._which(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,i=t.path||(t.composedPath?t.composedPath():null);if(i)for(var n=0;n<i.length;n++)if(i[n].nodeName&&"A"===i[n].nodeName.toUpperCase()&&i[n].href){e=i[n];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var s="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var r=e.getAttribute("href");if((this._hashbang||!this._samePath(e)||!e.hash&&"#"!==r)&&!(r&&r.indexOf("mailto:")>-1)&&!(s?e.target.baseVal:e.target)&&(s||this.sameOrigin(e.href))){var o=s?e.href.baseVal:e.pathname+e.search+(e.hash||"");o="/"!==o[0]?"/"+o:o,I&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var a=o,c=this._getBase();0===o.indexOf(c)&&(o=o.substr(c.length)),this._hashbang&&(o=o.replace("#!","")),(!c||a!==o||R&&"file:"===this._window.location.protocol)&&(t.preventDefault(),this.show(a))}}}}},L.prototype._onpopstate=(k=!1,S?(E&&"complete"===document.readyState?k=!0:window.addEventListener("load",(function(){setTimeout((function(){k=!0}),0)})),function(t){if(k){var e=this;if(t.state){var i=t.state.path;e.replace(i,t.state)}else if(R){var n=e._window.location;e.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}}):function(){}),L.prototype._which=function(t){return null==(t=t||S&&this._window.event).which?t.button:t.which},L.prototype._toURL=function(t){var e=this._window;if("function"==typeof URL&&R)return new URL(t,e.location.toString());if(E){var i=e.document.createElement("a");return i.href=t,i}},L.prototype.sameOrigin=function(t){if(!t||!R)return!1;var e=this._toURL(t),i=this._window.location;return i.protocol===e.protocol&&i.hostname===e.hostname&&(i.port===e.port||""===i.port&&(80==e.port||443==e.port))},L.prototype._samePath=function(t){if(!R)return!1;var e=this._window.location;return t.pathname===e.pathname&&t.search===e.search},L.prototype._decodeURLEncodedURIComponent=function(t){return"string"!=typeof t?t:this._decodeURLComponents?decodeURIComponent(t.replace(/\+/g," ")):t},U.prototype.pushState=function(){var t=this.page,e=t._window,i=t._hashbang;t.len++,N&&e.history.pushState(this.state,this.title,i&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},U.prototype.save=function(){var t=this.page;N&&t._window.history.replaceState(this.state,this.title,t._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},D.prototype.middleware=function(t){var e=this;return function(i,n){if(e.match(i.path,i.params))return i.routePath=e.path,t(i,n);n()}},D.prototype.match=function(t,e){var i=this.keys,n=t.indexOf("?"),s=~n?t.slice(0,n):t,r=this.regexp.exec(decodeURIComponent(s));if(!r)return!1;delete e[0];for(var o=1,a=r.length;o<a;++o){var c=i[o-1],l=this.page._decodeURLEncodedURIComponent(r[o]);void 0===l&&hasOwnProperty.call(e,c.name)||(e[c.name]=l)}return!0};var j=function t(){var e=new L;function i(){return T.apply(e,arguments)}return i.callbacks=e.callbacks,i.exits=e.exits,i.base=e.base.bind(e),i.strict=e.strict.bind(e),i.start=e.start.bind(e),i.stop=e.stop.bind(e),i.show=e.show.bind(e),i.back=e.back.bind(e),i.redirect=e.redirect.bind(e),i.replace=e.replace.bind(e),i.dispatch=e.dispatch.bind(e),i.exit=e.exit.bind(e),i.configure=e.configure.bind(e),i.sameOrigin=e.sameOrigin.bind(e),i.clickHandler=e.clickHandler.bind(e),i.create=t,Object.defineProperty(i,"len",{get:function(){return e.len},set:function(t){e.len=t}}),Object.defineProperty(i,"current",{get:function(){return e.current},set:function(t){e.current=t}}),i.Context=U,i.Route=D,i}(),H=j,M=j;H.default=M;const q=window,V=q.ShadowRoot&&(void 0===q.ShadyCSS||q.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,z=Symbol(),B=new WeakMap;class J{constructor(t,e,i){if(this._$cssResult$=!0,i!==z)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(V&&void 0===t){const i=void 0!==e&&1===e.length;i&&(t=B.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&B.set(e,t))}return t}toString(){return this.cssText}}const W=V?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new J("string"==typeof t?t:t+"",void 0,z))(e)})(t):t;var Y;const G=window,K=G.trustedTypes,Z=K?K.emptyScript:"",X=G.reactiveElementPolyfillSupport,Q={toAttribute(t,e){switch(e){case Boolean:t=t?Z:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(n){i=null}}return i}},F=(t,e)=>e!==t&&(e==e||t==t),tt={attribute:!0,type:String,converter:Q,reflect:!1,hasChanged:F},et="finalized";class it extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const n=this._$Ep(i,e);void 0!==n&&(this._$Ev.set(n,i),t.push(n))})),t}static createProperty(t,e=tt){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const s=this[t];this[e]=n,this.requestUpdate(t,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||tt}static finalize(){if(this.hasOwnProperty(et))return!1;this[et]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(W(t))}else void 0!==t&&e.push(W(t));return e}static _$Ep(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}_$Eu(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{V?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const i=document.createElement("style"),n=q.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=e.cssText,t.appendChild(i)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=tt){var n;const s=this.constructor._$Ep(t,i);if(void 0!==s&&!0===i.reflect){const r=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:Q).toAttribute(e,i.type);this._$El=t,null==r?this.removeAttribute(s):this.setAttribute(s,r),this._$El=null}}_$AK(t,e){var i;const n=this.constructor,s=n._$Ev.get(t);if(void 0!==s&&this._$El!==s){const t=n.getPropertyOptions(s),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(i=t.converter)||void 0===i?void 0:i.fromAttribute)?t.converter:Q;this._$El=s,this[s]=r.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,i){let n=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||F)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$Ek()}catch(n){throw e=!1,this._$Ek(),n}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var nt;it[et]=!0,it.elementProperties=new Map,it.elementStyles=[],it.shadowRootOptions={mode:"open"},null==X||X({ReactiveElement:it}),(null!==(Y=G.reactiveElementVersions)&&void 0!==Y?Y:G.reactiveElementVersions=[]).push("1.6.3");const st=window,rt=st.trustedTypes,ot=rt?rt.createPolicy("lit-html",{createHTML:t=>t}):void 0,at="$lit$",ct=`lit$${(Math.random()+"").slice(9)}$`,lt="?"+ct,dt=`<${lt}>`,ut=document,ht=()=>ut.createComment(""),pt=t=>null===t||"object"!=typeof t&&"function"!=typeof t,ft=Array.isArray,mt="[ \t\n\f\r]",vt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,gt=/-->/g,yt=/>/g,_t=RegExp(`>|${mt}(?:([^\\s"'>=/]+)(${mt}*=${mt}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),bt=/'/g,$t=/"/g,wt=/^(?:script|style|textarea|title)$/i,Ct=(St=1,(t,...e)=>({_$litType$:St,strings:t,values:e})),At=Symbol.for("lit-noChange"),xt=Symbol.for("lit-nothing"),kt=new WeakMap,Et=ut.createTreeWalker(ut,129,null,!1);var St;function Nt(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==ot?ot.createHTML(e):e}class It{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,r=0;const o=t.length-1,a=this.parts,[c,l]=((t,e)=>{const i=t.length-1,n=[];let s,r=2===e?"<svg>":"",o=vt;for(let a=0;a<i;a++){const e=t[a];let i,c,l=-1,d=0;for(;d<e.length&&(o.lastIndex=d,c=o.exec(e),null!==c);)d=o.lastIndex,o===vt?"!--"===c[1]?o=gt:void 0!==c[1]?o=yt:void 0!==c[2]?(wt.test(c[2])&&(s=RegExp("</"+c[2],"g")),o=_t):void 0!==c[3]&&(o=_t):o===_t?">"===c[0]?(o=null!=s?s:vt,l=-1):void 0===c[1]?l=-2:(l=o.lastIndex-c[2].length,i=c[1],o=void 0===c[3]?_t:'"'===c[3]?$t:bt):o===$t||o===bt?o=_t:o===gt||o===yt?o=vt:(o=_t,s=void 0);const u=o===_t&&t[a+1].startsWith("/>")?" ":"";r+=o===vt?e+dt:l>=0?(n.push(i),e.slice(0,l)+at+e.slice(l)+ct+u):e+ct+(-2===l?(n.push(void 0),a):u)}return[Nt(t,r+(t[i]||"<?>")+(2===e?"</svg>":"")),n]})(t,e);if(this.el=It.createElement(c,i),Et.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=Et.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith(at)||e.startsWith(ct)){const i=l[r++];if(t.push(e),void 0!==i){const t=n.getAttribute(i.toLowerCase()+at).split(ct),e=/([.?@])?(.*)/.exec(i);a.push({type:1,index:s,name:e[2],strings:t,ctor:"."===e[1]?Ot:"?"===e[1]?Dt:"@"===e[1]?jt:Tt})}else a.push({type:6,index:s})}for(const e of t)n.removeAttribute(e)}if(wt.test(n.tagName)){const t=n.textContent.split(ct),e=t.length-1;if(e>0){n.textContent=rt?rt.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],ht()),Et.nextNode(),a.push({type:2,index:++s});n.append(t[e],ht())}}}else if(8===n.nodeType)if(n.data===lt)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=n.data.indexOf(ct,t+1));)a.push({type:7,index:s}),t+=ct.length-1}s++}}static createElement(t,e){const i=ut.createElement("template");return i.innerHTML=t,i}}function Pt(t,e,i=t,n){var s,r,o,a;if(e===At)return e;let c=void 0!==n?null===(s=i._$Co)||void 0===s?void 0:s[n]:i._$Cl;const l=pt(e)?void 0:e._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(r=null==c?void 0:c._$AO)||void 0===r||r.call(c,!1),void 0===l?c=void 0:(c=new l(t),c._$AT(t,i,n)),void 0!==n?(null!==(o=(a=i)._$Co)&&void 0!==o?o:a._$Co=[])[n]=c:i._$Cl=c),void 0!==c&&(e=Pt(t,c._$AS(t,e.values),c,n)),e}class Rt{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:i},parts:n}=this._$AD,s=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:ut).importNode(i,!0);Et.currentNode=s;let r=Et.nextNode(),o=0,a=0,c=n[0];for(;void 0!==c;){if(o===c.index){let e;2===c.type?e=new Lt(r,r.nextSibling,this,t):1===c.type?e=new c.ctor(r,c.name,c.strings,this,t):6===c.type&&(e=new Ht(r,this,t)),this._$AV.push(e),c=n[++a]}o!==(null==c?void 0:c.index)&&(r=Et.nextNode(),o++)}return Et.currentNode=ut,s}v(t){let e=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Lt{constructor(t,e,i,n){var s;this.type=2,this._$AH=xt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cp=null===(s=null==n?void 0:n.isConnected)||void 0===s||s}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Pt(this,t,e),pt(t)?t===xt||null==t||""===t?(this._$AH!==xt&&this._$AR(),this._$AH=xt):t!==this._$AH&&t!==At&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>ft(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==xt&&pt(this._$AH)?this._$AA.nextSibling.data=t:this.$(ut.createTextNode(t)),this._$AH=t}g(t){var e;const{values:i,_$litType$:n}=t,s="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=It.createElement(Nt(n.h,n.h[0]),this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===s)this._$AH.v(i);else{const t=new Rt(s,this),e=t.u(this.options);t.v(i),this.$(e),this._$AH=t}}_$AC(t){let e=kt.get(t.strings);return void 0===e&&kt.set(t.strings,e=new It(t)),e}T(t){ft(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,n=0;for(const s of t)n===e.length?e.push(i=new Lt(this.k(ht()),this.k(ht()),this,this.options)):i=e[n],i._$AI(s),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class Tt{constructor(t,e,i,n,s){this.type=1,this._$AH=xt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=xt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,n){const s=this.strings;let r=!1;if(void 0===s)t=Pt(this,t,e,0),r=!pt(t)||t!==this._$AH&&t!==At,r&&(this._$AH=t);else{const n=t;let o,a;for(t=s[0],o=0;o<s.length-1;o++)a=Pt(this,n[i+o],e,o),a===At&&(a=this._$AH[o]),r||(r=!pt(a)||a!==this._$AH[o]),a===xt?t=xt:t!==xt&&(t+=(null!=a?a:"")+s[o+1]),this._$AH[o]=a}r&&!n&&this.j(t)}j(t){t===xt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Ot extends Tt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===xt?void 0:t}}const Ut=rt?rt.emptyScript:"";class Dt extends Tt{constructor(){super(...arguments),this.type=4}j(t){t&&t!==xt?this.element.setAttribute(this.name,Ut):this.element.removeAttribute(this.name)}}class jt extends Tt{constructor(t,e,i,n,s){super(t,e,i,n,s),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=Pt(this,t,e,0))&&void 0!==i?i:xt)===At)return;const n=this._$AH,s=t===xt&&n!==xt||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==xt&&(n===xt||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class Ht{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){Pt(this,t)}}const Mt=st.litHtmlPolyfillSupport;null==Mt||Mt(It,Lt),(null!==(nt=st.litHtmlVersions)&&void 0!==nt?nt:st.litHtmlVersions=[]).push("2.8.0");const qt=(t,e,i)=>{var n,s;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:e;let o=r._$litPart$;if(void 0===o){const t=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:null;r._$litPart$=o=new Lt(e.insertBefore(ht(),t),t,void 0,null!=i?i:{})}return o._$AI(t),o};var Vt,zt;class Bt extends it{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=qt(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return At}}Bt.finalized=!0,Bt._$litElement$=!0,null===(Vt=globalThis.litElementHydrateSupport)||void 0===Vt||Vt.call(globalThis,{LitElement:Bt});const Jt=globalThis.litElementPolyfillSupport;async function Wt(t,e){const i=new URL(t,"https://parseapi.back4app.com"),n=await fetch(i,e);if(!0!==n.ok){403===n.status&&await ye();const t=await n.json();throw new Error(`${t.error} Status: ${n.status}`,{cause:n})}return n.json()}function Yt(t,e){const i=new Headers({"X-Parse-Application-Id":"0oqWvkMylRfPgcnXNXtOUe8SWSqDZPiHktiLW9Np","X-Parse-REST-API-Key":"4YzVVeTWOVJyamwDNrNaafCLGzwC5qWnt7dw9aot"}),n=ve();return n&&i.append("X-Parse-Session-Token",n.token),e&&i.append("Content-Type","application/json"),{method:t,headers:i,...e?{body:JSON.stringify(e)}:{}}}null==Jt||Jt({LitElement:Bt}),(null!==(zt=globalThis.litElementVersions)&&void 0!==zt?zt:globalThis.litElementVersions=[]).push("3.3.3");const Gt=t=>Wt(t,Yt("GET")),Kt=(t,e)=>Wt(t,Yt("POST",e)),Zt=(t,e)=>Wt(t,Yt("PUT",e)),Xt=t=>Wt(t,Yt("DELETE"));function Qt(t){if(!t)return{};try{return decodeURIComponent(t).split("&").reduce(((t,e)=>{const[i,n]=e.split("=");return t[i.trim()]=(null==n?void 0:n.includes(","))?n.split(",").map(decodeURIComponent):decodeURIComponent(null==n?void 0:n.trim()),t}),{})}catch(e){return console.error(e),{}}}function Ft(t){if(!t)return"";try{return Object.entries(t).filter((([t,e])=>{const i="string"==typeof t&&t.trim().length>0,n="string"==typeof e?e.trim().length>0:Array.isArray(e)&&e.every((t=>"string"==typeof t&&t.trim().length>0));return i&&n})).map((([t,e])=>{const i=Array.isArray(e)?e.map((t=>encodeURIComponent(t.trim()))).join(","):encodeURIComponent(e.trim());return`${encodeURIComponent(t.trim())}=${i}`})).join("&")}catch(e){return console.error(e),""}}function te(t){const e=new FormData(t);return[Object.fromEntries(Array.from(e,(([t,e])=>[t,"string"==typeof e?e.trim():e]))),e=>Array.from(t.elements).forEach((t=>e?t.setAttribute("disabled","true"):t.removeAttribute("disabled")))]}function ee(){if(crypto&&crypto.randomUUID)return crypto.randomUUID();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=~~(16*Math.random());return("x"===t?e:3&e|8).toString(16)}))}function ie(t,e={}){const{parent:i,prepend:n=!1,attributes:s,children:r,style:o,...a}=e,c=document.createElement(t);if(void 0!==s)for(const l in s)c.setAttribute(l,s[l]);if(Array.isArray(r))for(const l of r)c.append(l);if(void 0!==o&&Object.assign(c.style,o),Object.assign(c,a),void 0!==i){const t="string"==typeof i?document.querySelector(i):i;t&&t[n?"prepend":"append"](c)}return c}t=new WeakMap;const ne=new class{constructor(e){var i,n,s,r;l(this,t,void 0),s=e,a(i=this,n=t,"write to private field"),r?r.call(i,s):n.set(i,s),this.supported||console.warn("Cache API is not supported in this environment"),!sessionStorage.getItem(`${c(this,t)}Initialized`)&&this.supported&&(sessionStorage.setItem(`${c(this,t)}Initialized`,"true"),this.deleteCache())}get supported(){return!!window.caches}get databaseName(){return c(this,t)}async getCacheData(e){if(!this.supported)return Promise.resolve(null);const i=await caches.open(c(this,t)),n=await i.match(new Request(e));return n&&n.ok?await n.json():Promise.resolve(null)}async updateCacheData(e,i){if(!this.supported)return Promise.resolve();return(await caches.open(c(this,t))).put(new Request(e),new Response(JSON.stringify(i)))}async clearCacheData(e){if(!this.supported)return Promise.resolve(!1);return(await caches.open(c(this,t))).delete(new Request(e))}async deleteCache(){return this.supported?caches.delete(c(this,t)):Promise.resolve(!1)}}("CarServiceCacheDatabase"),se="rgba(0 0 0 / 0.5)",re=3,oe={default:{icon:"",color:"#555555",backgroundColor:"#f2f2f2"},info:{icon:"info",color:"#217ca3",backgroundColor:"#cfe8f3"},success:{icon:"check_circle",color:"#45874a",backgroundColor:"#e5f6e4"},warning:{icon:"error",color:"#b0822f",backgroundColor:"#fef5dc"},error:{icon:"cancel",color:"#b23c3a",backgroundColor:"#f2dede"}};e=new WeakMap,i=new WeakSet,n=function(t,e){switch(t){case"cube-flip":return ie("div",{className:"notice-loading-cube-flip",style:{backgroundColor:e}});case"dots-zoom":return ie("div",{className:"notice-loading-dots-zoom",children:[ie("div",{className:"notice-loading-dots-zoom1",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-dots-zoom2",style:{backgroundColor:e}})]});case"line":return ie("div",{className:"notice-loading-line",children:[ie("div",{className:"notice-loading-line-rect1",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-line-rect2",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-line-rect3",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-line-rect4",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-line-rect5",style:{backgroundColor:e}})]});case"dots-spin":return ie("div",{className:"notice-loading-spin-dots",children:[ie("div",{className:"notice-loading-spin-dot1",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-spin-dot2",style:{backgroundColor:e}})]});case"dots":return ie("div",{className:"notice-loading-dots",children:[ie("div",{className:"notice-loading-dot1",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-dot2",style:{backgroundColor:e}}),ie("div",{style:{backgroundColor:e}})]});case"cube-zoom":return ie("div",{className:"notice-loading-cube-zoom",children:[ie("div",{className:"notice-loading-cube-zoom-1",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-2",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-3",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-4",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-5",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-6",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-7",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-8",style:{backgroundColor:e}}),ie("div",{className:"notice-loading-cube-zoom-9",style:{backgroundColor:e}})]});default:return null}},s=new WeakSet,r=function(t,e,i,n){const s=ie("div",{className:"notice-modal-buttons"});switch(t){case"yes-no":return ie("button",{parent:s,attributes:{"button-type":"info"},textContent:"Да",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),ie("button",{parent:s,attributes:{"button-type":"danger"},textContent:"Не",onclick:t=>{e.remove(),"function"==typeof n&&n(t)}}),s;case"ok":return ie("button",{parent:s,textContent:"Добре",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),s;case"ok-cancel":return ie("button",{parent:s,textContent:"Добре",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),ie("button",{parent:s,attributes:{"button-type":"danger"},textContent:"Отказ",onclick:t=>{e.remove(),"function"==typeof n&&n(t)}}),s;case"retry-cancel":return ie("button",{parent:s,attributes:{"button-type":"info"},textContent:"Нов опит",onclick:t=>{e.remove(),"function"==typeof i&&i(t)}}),ie("button",{parent:s,attributes:{"button-type":"danger"},textContent:"Отказ",onclick:t=>{e.remove(),"function"==typeof n&&n(t)}}),s;default:return null}};const ae=new class{constructor(){l(this,i),l(this,s),l(this,e,document.body)}showLoading(t={}){const{type:s="dots",color:r="white",autoClose:o,title:a,titleColor:l,maskColor:u=se}=t,h=ie("div",{parent:c(this,e),className:"notice-loading notice-flex-center notice-fixed-all-page",id:"notice-loading"});ie("div",{parent:h,className:"notice-mask notice-fixed-all-page",style:{backgroundColor:u}});const p=d(this,i,n).call(this,s,r)||d(this,i,n).call(this,"dots",r),f=ie("div",{parent:h,className:"notice-flex-center notice-loading-main",children:[p]});a&&ie("p",{parent:f,style:{color:l},textContent:a}),o&&setTimeout((()=>h.remove()),1e3*o)}hideLoading(){var t;null==(t=document.getElementById("notice-loading"))||t.remove()}showToast(t){const{text:i,type:n="default",autoClose:s=re,showClose:r=!0}=t;if(!i)return;const{icon:o,color:a,backgroundColor:l}=oe[n]||oe.default,d=document.getElementById("notice-toast")||ie("div",{parent:c(this,e),className:"notice-toast",id:"notice-toast"}),u=ie("div",{parent:d,className:"notice-toast-main",id:`notice-toast-${ee()}`,style:{backgroundColor:l}}),h=ie("div",{parent:u,className:"notice-toast-container",children:[ie("p",{className:"notice-toast-text",style:{color:a},textContent:i})]});o&&ie("i",{parent:h,prepend:!0,className:"material-icons notice-toast-icon",style:{color:a},textContent:o}),(r||!s)&&ie("i",{parent:h,className:"material-icons notice-close-icon",innerHTML:"close",onclick:()=>{u.classList.remove("notice-toast-main-active"),setTimeout((()=>u.remove()),500)}}),setTimeout((()=>u.classList.add("notice-toast-main-active")));const p=!!Number(getComputedStyle(d).getPropertyValue("--_should-auto-close"));if(s||p){setTimeout((()=>{u&&(u.classList.remove("notice-toast-main-active"),setTimeout((()=>u.remove()),500))}),1e3*(s||re))}}showModal(t={}){const{type:i="yes-no",color:n,backgroundColor:o,title:a,titleColor:l,message:u,messageColor:h,maskColor:p=se,onConfirm:f,onCancel:m}=t,v=ie("div",{parent:c(this,e),className:"notice-modal notice-flex-center notice-fixed-all-page",id:"notice-modal"});ie("div",{parent:v,className:"notice-mask notice-fixed-all-page",style:{backgroundColor:p}});const g=ie("div",{parent:v,className:"notice-flex-center notice-modal-main",style:{backgroundColor:o},children:[d(this,s,r).call(this,i,v,f,m)||d(this,s,r).call(this,"yes-no",v,f,m)]});u&&ie("p",{parent:g,prepend:!0,style:{color:h||n},textContent:u}),a&&ie("h2",{parent:g,prepend:!0,style:{color:l||n},textContent:a})}},ce=document.querySelectorAll(".user-navigation"),le=document.querySelectorAll(".guest-navigation");function de(){me()?(ce.forEach((t=>t.removeAttribute("hidden"))),le.forEach((t=>t.setAttribute("hidden","")))):(ce.forEach((t=>t.setAttribute("hidden",""))),le.forEach((t=>t.removeAttribute("hidden"))))}const ue={LOGIN:"/login",REGISTER:"/users",LOGOUT:"/logout"},he={CREATE_CAR:"/classes/Car",ALL_CARS:(t="")=>`/classes/Car?${Ft({order:"-createdAt",where:t})}`,CAR_BY_ID:t=>`/classes/Car/${t}`},pe={CREATE_REPAIR:"/classes/Repair",ALL_REPAIRS:t=>`/classes/Repair?${Ft({order:"-createdAt",where:t})}`,REPAIR_BY_ID:t=>`/classes/Repair/${t}`},fe="car-service-current-user-data";function me(){return!!localStorage.getItem(fe)}function ve(){var t;return JSON.parse(null!=(t=localStorage.getItem(fe))?t:"null")}async function ge(t){await ne.deleteCache().catch(console.error),localStorage.setItem(fe,JSON.stringify(t))}async function ye(){await ne.deleteCache().catch(console.error),localStorage.removeItem(fe)}const _e={itemsPerPage:10,relativePageLinks:3};async function be(t){const e="/cars",i=await ne.getCacheData(e),n=i&&i.find((e=>e.objectId===t));if(n)return n;const s=await Gt(he.CAR_BY_ID(t));if(i){const t=[s,...i].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));await ne.updateCacheData(e,JSON.parse(JSON.stringify(t)))}return s}async function $e(t){var e;const i=await Xt(he.CAR_BY_ID(t)),n="/cars",s=(null!=(e=await ne.getCacheData(n))?e:[]).filter((e=>e.objectId!==t));return await ne.updateCacheData(n,JSON.parse(JSON.stringify(s))),i}async function we(t,e){const i=JSON.stringify({car:{__type:"Pointer",className:"Car",objectId:t}}),n=`/cars/${t}/repairs`,s=await ne.getCacheData(n);let r;if(s?r=s:(({results:r}=await Gt(pe.ALL_REPAIRS(i))),await ne.updateCacheData(n,JSON.parse(JSON.stringify(r)))),!e)return{results:r,count:r.length};const o=10*(e-1),a=10*e;return{results:r.slice(o,a),count:r.length}}async function Ce(t,e){const i=`/cars/${t}/repairs`,n=await ne.getCacheData(i),s=n&&n.find((t=>t.objectId===e));if(s)return s;const r=await Gt(pe.REPAIR_BY_ID(e));if(n){const t=[r,...n].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));await ne.updateCacheData(i,JSON.parse(JSON.stringify(t)))}return r}async function Ae(t){const{results:e}=await we(t),i=e.map((({objectId:t})=>Xt(pe.REPAIR_BY_ID(t)))),n=`/cars/${t}/repairs`;return await ne.clearCacheData(n),Promise.all(i)}const xe=["/user/login","/user/register"];function ke(t,e={}){const{container:i,...n}=e,s=i&&(i instanceof HTMLElement||i instanceof DocumentFragment)?i:"string"==typeof i?document.querySelector(i):null,r=document.getElementById("site-content")||document.body;return qt(t,s||r,n)}const Ee=(t,e)=>t.length>0?Se(t,e):Ct`<p class="empty">Нямаш добавени автомобили!</p>`,Se=(t,e)=>Ct`<table role="table"><thead role="rowgroup"><tr role="row"><th role="columnheader">Рама</th><th role="columnheader">Pегистрационен &numero;</th><th role="columnheader">Марка / Модел</th><th role="columnheader">Двигател</th><th role="columnheader">Име на клиента</th><th role="columnheader">Ремонти</th><th role="columnheader">Редакция</th><th role="columnheader">Изтриване</th></tr></thead><tbody role="rowgroup">${t.map((t=>Ne(t,e)))}</tbody></table>`,Ne=(t,e)=>Ct`<tr role="row"><td role="cell" data-cell-content="Рама">${t.vin}</td><td role="cell" data-cell-content="Pегистрационен &numero;">${t.registration}</td><td role="cell" data-cell-content="Марка / Модел">${t.make}</td><td role="cell" data-cell-content="Двигател">${t.engine}</td><td role="cell" data-cell-content="Име на клиента">${t.customerName}</td><td role="cell" data-cell-content="Ремонти"><div class="buttons"><a role="button" button-type="info" href="/cars/${t.objectId}/repairs" @click=${H.clickHandler}><i class="material-icons">car_repair</i></a></div></td><td role="cell" data-cell-content="Редакция"><div class="buttons"><a role="button" href="/cars/${t.objectId}/edit" @click=${H.clickHandler}><i class="material-icons">edit</i></a></div></td><td role="cell" data-cell-content="Изтриване"><div class="buttons"><button button-type="danger" @click=${i=>e(i,t)}><i class="material-icons">delete_forever</i></button></div></td></tr>`,Ie=(t,e,i,n)=>{const s=(s,r)=>{const o=t===r||r<1||r>e,a="number"==typeof s&&t===r,c=o?"#":(t=>{const e=Ft({filter:i,query:n,page:t.toString()});return`${window.location.pathname}?${e}`})(r);return Ct`<a href=${c} class=${`${o?"not-selectable":""} ${a?"active":""}`} @click=${H.clickHandler}>${s}</a>`};const r=s(Ct`<i class="material-icons">keyboard_double_arrow_left</i>`,1),o=s(Ct`<i class="material-icons">chevron_left</i>`,t-1),a=function(){const i=Math.floor(_e.relativePageLinks/2),n=Math.min(Math.max(1,t-i),Math.max(1,e-_e.relativePageLinks+1)),s=Math.max(Math.min(e,t+i),Math.min(e,_e.relativePageLinks)),r=Math.min(s-n+1,e);return Array.from({length:r},((t,e)=>n+e))}().map((t=>s(t,t))),c=s(Ct`<i class="material-icons">chevron_right</i>`,t+1),l=s(Ct`<i class="material-icons">keyboard_double_arrow_right</i>`,e);return Ct`${r}${o}${a}${c}${l}`},Pe=t=>t.length>0?Re(t):Ct`<p class="empty">Нямаш завършени ремонти!</p>`,Re=t=>Ct`<table role="table"><thead role="rowgroup"><tr role="row"><th role="columnheader">Извършен на</th><th role="columnheader">Километри</th><th role="columnheader">Детайли по ремонта</th></tr></thead><tbody role="rowgroup">${t.map(Le)}</tbody></table>`,Le=t=>Ct`<tr role="row"><td role="cell" data-cell-content="Извършен на">${t.date}</td><td role="cell" data-cell-content="Километри">${t.km}</td><td role="cell" data-cell-content="Детайли по ремонта"><div class="buttons"><a role="button" button-type="info" href="/cars/${t.car.objectId}/repairs/${t.objectId}" @click=${H.clickHandler}>Детайли</a></div></td></tr>`,Te=(t,e)=>{const i=(i,n)=>{const s=t===n||n<1||n>e,r="number"==typeof i&&t===n,o=s?"#":(t=>{const e=Ft({page:t.toString()});return`${window.location.pathname}?${e}`})(n);return Ct`<a href=${o} class=${`${s?"not-selectable":""} ${r?"active":""}`} @click=${H.clickHandler}>${i}</a>`};const n=i(Ct`<i class="material-icons">keyboard_double_arrow_left</i>`,1),s=i(Ct`<i class="material-icons">chevron_left</i>`,t-1),r=function(){const i=Math.floor(_e.relativePageLinks/2),n=Math.min(Math.max(1,t-i),Math.max(1,e-_e.relativePageLinks+1)),s=Math.max(Math.min(e,t+i),Math.min(e,_e.relativePageLinks)),r=Math.min(s-n+1,e);return Array.from({length:r},((t,e)=>n+e))}().map((t=>i(t,t))),o=i(Ct`<i class="material-icons">chevron_right</i>`,t+1),a=i(Ct`<i class="material-icons">keyboard_double_arrow_right</i>`,e);return Ct`${n}${s}${r}${o}${a}`};function Oe(t){t.render(Ct`<section id="auth-page"><form @submit=${Ue}><fieldset class="input-fields"><legend>Вход</legend><div class="field"><label for="user__username">Потребителско име: <span class='required'>*</span></label><input name="username" id="user__username" type="text" placeholder="Въведи потребителско име..." required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="user__password">Парола: <span class='required'>*</span></label><div class="password-field"><input name="password" id="user__password" type="password" placeholder="Въведи парола..." required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /><i class="material-icons eye-icon" @click=${De}>visibility_off</i></div></div><div class="buttons"><input role="button" button-type="info" type="submit" value="Вход" /></div><div class="form-link"><span>Все още нямаш профил? <a href="/user/register" @click=${H.clickHandler}>Регистрация</a></span></div></fieldset></form></section>`)}async function Ue(t){t.preventDefault();const e=t.target,[i,n]=te(e);try{n(!0),ae.showLoading({type:"cube-zoom"}),await async function(t){const e=await Kt(ue.LOGIN,t);return await ge({username:t.username,id:e.objectId,token:e.sessionToken}),de(),e}(i),H.redirect("/cars")}catch(s){const t=s instanceof Error?s.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{n(!1),ae.hideLoading(),e.reset()}}function De(t){t.preventDefault();const e=t.target,i=e.previousElementSibling,n="password"===i.type?"text":"password";i.setAttribute("type",n),e.textContent="password"===n?"visibility_off":"visibility"}function je(t){t.render(Ct`<section id="auth-page"><form @submit=${He}><fieldset class="input-fields"><legend>Регистрация</legend><div class="field"><label for="user__username">Потребителско име: <span class='required'>*</span></label><input name="username" id="user__username" type="text" placeholder="Въведи потребителско име..." required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="user__password">Парола: <span class='required'>*</span></label><div class="password-field"><input name="password" id="user__password" type="password" placeholder="Въведи парола..." required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /><i class="material-icons eye-icon" @click=${Me}>visibility_off</i></div></div><div class="field"><label for="user__repass">Потвърди паролата: <span class='required'>*</span></label><input name="repass" id="user__repass" type="password" placeholder="Повтори паролата..." required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="buttons"><input role="button" button-type="info" type="submit" value="Регистрация" /></div><div class="form-link"><span>Вече имаш създаден профил? <a href="/user/login" @click=${H.clickHandler}>Вход</a></span></div></fieldset></form></section>`)}async function He(t){t.preventDefault();const e=t.target,[{username:i,password:n,repass:s},r]=te(e);if(n===s)try{r(!0),ae.showLoading({type:"cube-zoom"}),await async function(t){const e=await Kt(ue.REGISTER,t);return await ge({username:t.username,id:e.objectId,token:e.sessionToken}),de(),e}({username:i,password:n}),H.redirect("/cars")}catch(o){const t=o instanceof Error?o.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{r(!1),ae.hideLoading(),e.reset()}else ae.showToast({text:"Паролите не съвпадат!",type:"warning"})}function Me(t){var e,i,n;t.preventDefault();const s=t.target,r=s.previousElementSibling,o=null==(n=null==(i=null==(e=s.parentElement)?void 0:e.parentElement)?void 0:i.nextElementSibling)?void 0:n.lastElementChild,a="password"===r.type?"text":"password";r.setAttribute("type",a),o.setAttribute("type",a),s.textContent="password"===a?"visibility_off":"visibility"}const qe=2;class Ve{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const ze=(t,e)=>{var i,n;const s=t._$AN;if(void 0===s)return!1;for(const r of s)null===(n=(i=r)._$AO)||void 0===n||n.call(i,e,!1),ze(r,e);return!0},Be=t=>{let e,i;do{if(void 0===(e=t._$AM))break;i=e._$AN,i.delete(t),t=e}while(0===(null==i?void 0:i.size))},Je=t=>{for(let e;e=t._$AM;t=e){let i=e._$AN;if(void 0===i)e._$AN=i=new Set;else if(i.has(t))break;i.add(t),Ge(e)}};function We(t){void 0!==this._$AN?(Be(this),this._$AM=t,Je(this)):this._$AM=t}function Ye(t,e=!1,i=0){const n=this._$AH,s=this._$AN;if(void 0!==s&&0!==s.size)if(e)if(Array.isArray(n))for(let r=i;r<n.length;r++)ze(n[r],!1),Be(n[r]);else null!=n&&(ze(n,!1),Be(n));else ze(this,t)}const Ge=t=>{var e,i,n,s;t.type==qe&&(null!==(e=(n=t)._$AP)&&void 0!==e||(n._$AP=Ye),null!==(i=(s=t)._$AQ)&&void 0!==i||(s._$AQ=We))};class Ke extends Ve{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,i){super._$AT(t,e,i),Je(this),this.isConnected=t._$AU}_$AO(t,e=!0){var i,n;t!==this.isConnected&&(this.isConnected=t,t?null===(i=this.reconnected)||void 0===i||i.call(this):null===(n=this.disconnected)||void 0===n||n.call(this)),e&&(ze(this,t),Be(this))}setValue(t){if(void 0===this._$Ct.strings)this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}class Ze{constructor(t){this.G=t}disconnect(){this.G=void 0}reconnect(t){this.G=t}deref(){return this.G}}class Xe{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){var t;null!==(t=this.Y)&&void 0!==t||(this.Y=new Promise((t=>this.Z=t)))}resume(){var t;null===(t=this.Z)||void 0===t||t.call(this),this.Y=this.Z=void 0}}const Qe=t=>{return!(e=t,null===e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof t.then);var e},Fe=1073741823;const ti=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends Ke{constructor(){super(...arguments),this._$C_t=Fe,this._$Cwt=[],this._$Cq=new Ze(this),this._$CK=new Xe}render(...t){var e;return null!==(e=t.find((t=>!Qe(t))))&&void 0!==e?e:At}update(t,e){const i=this._$Cwt;let n=i.length;this._$Cwt=e;const s=this._$Cq,r=this._$CK;this.isConnected||this.disconnected();for(let o=0;o<e.length&&!(o>this._$C_t);o++){const t=e[o];if(!Qe(t))return this._$C_t=o,t;o<n&&t===i[o]||(this._$C_t=Fe,n=0,Promise.resolve(t).then((async e=>{for(;r.get();)await r.get();const i=s.deref();if(void 0!==i){const n=i._$Cwt.indexOf(t);n>-1&&n<i._$C_t&&(i._$C_t=n,i.setValue(e))}})))}return At}disconnected(){this._$Cq.disconnect(),this._$CK.pause()}reconnected(){this._$Cq.reconnect(this),this._$CK.resume()}});async function ei(t){const{page:e="1",filter:i="",query:n=""}=Qt(t.querystring);t.render(ti((async()=>{const t=await async function(t,e,i){try{const{results:n,count:s}=await async function(t,e,i){const n=e&&i?JSON.stringify({[e]:{$regex:`(?i)${i}`}}):null,s="/cars",r=await ne.getCacheData(s);let o;if(n?({results:o}=await Gt(he.ALL_CARS(n))):(o=null!=r?r:(await Gt(he.ALL_CARS())).results,r||await ne.updateCacheData(s,o)),!t)return{results:o,count:o.length};const a=(t-1)*_e.itemsPerPage,c=t*_e.itemsPerPage;return{results:o.slice(a,c),count:o.length}}(t,e,i);return{cars:n,carsCount:s,pageNumber:t,searchCategory:e,searchQuery:i}}catch(n){const t=n instanceof Error?n.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"}),H.redirect("/")}finally{ae.hideLoading()}}(Number(e)||1,i,n);if(t)return((t,e,i)=>{const{cars:n,carsCount:s,pageNumber:r,searchCategory:o,searchQuery:a}=t,c=Math.max(Math.ceil(s/_e.itemsPerPage),1);return Ct`<section id="catalog-page"><form autocomplete="off"><fieldset><legend>Всички автомобили</legend><fieldset class="search"><label for="search-options" id="search-label" aria-hidden="true">Търсачка</label><select id="search-options" name="search-options" aria-labelledby="search-label"><option value="registration" .selected=${"registration"===o?"selected":""}>Регистрационен &numero;</option><option value="make" .selected=${"make"===o?"selected":""}>Марка</option><option value="engine" .selected=${"engine"===o?"selected":""}>Двигател</option><option value="customerName" .selected=${"customerName"===o?"selected":""}>Име на клиента</option></select><input id="search-input" type="search" name="search" placeholder="Въведи..." .value=${a} /><button @click=${e}>Търси</button></fieldset>${Ee(n,i)}<fieldset class="pagination">${Ie(r,c,o,a)}</fieldset></fieldset></form></section>`})(t,ii,ni)})(),ae.showLoading()))}function ii(t){t.preventDefault();const e=document.getElementById("search-options").value.trim(),i=document.getElementById("search-input").value.trim();e&&i?H.redirect(`/cars?${Ft({filter:e,query:i})}`):H.redirect("/cars")}async function ni(t,e){t.preventDefault();if(await new Promise((t=>ae.showModal({message:`Сигурен ли си, че искаш да изтриеш автомобила на ${e.customerName} - "${e.registration}"`,onConfirm:()=>t(!0),onCancel:()=>t(!1)}))))try{ae.showLoading(),await Promise.all([Ae(e.objectId),$e(e.objectId)]),ae.showToast({text:`Успешно изтрихте автомобила на ${e.customerName} - "${e.registration}"`,type:"info"})}catch(i){const t=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{ae.hideLoading(),H.redirect("/cars")}}function si(t){t.render(Ct`<section id="create-page"><form @submit=${ri} autocomplete="off"><fieldset><legend>Добави автомобил</legend><fieldset class="input-fields"><div class="field"><label for="car__vin">VIN:</label><input name="vin" id="car__vin" type="text" /></div><div class="field"><label for="car__registration">Pегистрационен &numero;: <span class='required'>*</span></label><input name="registration" id="car__registration" type="text" required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="car__make">Марка / Модел:</label><input name="make" id="car__make" type="text" /></div><div class="field"><label for="car__engine">Двигател:</label><input name="engine" id="car__engine" type="text" /></div><div class="field"><label for="car__customer">Име на клиента: <span class='required'>*</span></label><input name="customerName" id="car__customer" type="text" required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div></fieldset><div class="buttons"><button button-type="success" type="submit">Добави</button><a role="button" button-type="danger" href="/cars" @click=${H.clickHandler}>Отказ</a></div></fieldset></form></section>`)}async function ri(t){t.preventDefault();const e=t.target,[i,n]=te(e);try{n(!0),ae.showLoading(),await async function(t){var e;const{id:i}=ve(),n={owner:Object.freeze({__type:"Pointer",className:"_User",objectId:i})},s=Object.assign({},t,n),r=await Kt(he.CREATE_CAR,s),o="/cars",a=null!=(e=await ne.getCacheData(o))?e:[],c={...s,...r},l=[c,...a].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));return await ne.updateCacheData(o,JSON.parse(JSON.stringify(l))),c}(i),ae.showToast({text:`Успешно създадохте автомобил на ${i.customerName} - "${i.registration}"`,type:"success"})}catch(s){const t=s instanceof Error?s.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{n(!1),ae.hideLoading(),e.reset(),H.redirect("/cars")}}function oi(t){const{carId:e}=t.params;t.render(ti((async()=>{const t=await async function(t){try{return await be(t)}catch(e){const t=e instanceof Error?e.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"}),H.redirect("/cars")}finally{ae.hideLoading()}}(e);var i,n;if(t)return n=ai,Ct`<section id="edit-page"><form @submit=${t=>n(t,i)} autocomplete="off"><fieldset><legend>Редактирай автомобил</legend><fieldset class="input-fields"><div class="field"><label for="car__vin">VIN:</label><input name="vin" id="car__vin" type="text" .value=${(i=t).vin} /></div><div class="field"><label for="car__registration">Pегистрационен &numero;: <span class='required'>*</label><input name="registration" id="car__registration" type="text" .value=${i.registration} required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="car__make">Марка / Модел:</label><input name="make" id="car__make" type="text" .value=${i.make} /></div><div class="field"><label for="car__engine">Двигател:</label><input name="engine" id="car__engine" type="text" .value=${i.engine} /></div><div class="field"><label for="car__customer">Име на клиента: <span class='required'>*</label><input name="customerName" id="car__customer" type="text" .value=${i.customerName} required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div></fieldset><div class="buttons"><button button-type="info" type="submit">Запази промените</button><a role="button" button-type="danger" href="/cars" @click=${H.clickHandler}>Отказ</a></div></fieldset></form></section>`})(),ae.showLoading()))}async function ai(t,e){t.preventDefault();const i=t.target,[n,s]=te(i);try{s(!0),ae.showLoading(),await async function(t,e){var i,n;const s=await Zt(he.CAR_BY_ID(t),e),r="/cars",o=null!=(i=await ne.getCacheData(r))?i:[],a={...null!=(n=o.find((e=>e.objectId===t)))?n:{},...e,...s},c=[a,...o].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));return await ne.updateCacheData(r,JSON.parse(JSON.stringify(c))),a}(e.objectId,n),ae.showToast({text:`Успешно редактирахте ремонт на ${n.customerName} - "${n.registration}"`,type:"info"})}catch(r){const t=r instanceof Error?r.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{s(!1),ae.hideLoading(),i.reset(),H.redirect("/cars")}}function ci(t){const{carId:e}=t.params,{page:i="1"}=Qt(t.querystring);t.render(ti((async()=>{const t=await async function(t,e){try{const[{results:i,count:n},s]=await Promise.all([we(t,e),be(t)]);return{repairs:i,repairsCount:n,car:s,pageNumber:e}}catch(i){const t=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"}),H.redirect("/cars")}finally{ae.hideLoading()}}(e,Number(i)||1);if(t)return(t=>{const{repairs:e,repairsCount:i,car:n,pageNumber:s}=t,r=Math.max(Math.ceil(i/_e.itemsPerPage),1);return Ct`<section id="catalog-page"><form autocomplete="off"><fieldset><legend>Всичките ремонти на ${n.customerName} - "${n.registration}"</legend><fieldset class="search"><div class="buttons"><a role="button" button-type="success" href="/cars/${n.objectId}/repairs/create" @click=${H.clickHandler}>Добави ремонт</a><a role="button" href="/cars" @click=${H.clickHandler}>Назад</a></div></fieldset>${Pe(e)}<fieldset class="pagination">${Te(s,r)}</fieldset></fieldset></form></section>`})(t)})(),ae.showLoading()))}function li(t){var e,i;t.render((e=t.params.carId,i=di,Ct`<section id="create-page"><form @submit=${t=>i(t,e)} autocomplete="off"><fieldset><legend>Добави ремонт</legend><fieldset class="input-fields"><div class="field"><label for="repair__date">Датa на ремонта: <span class='required'>*</span></label><input name="date" id="repair__date" type="date" value="${(new Date).toISOString().slice(0,10)}" style="cursor: pointer;" required onclick="this.showPicker()" oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="repair__km">Километри: <span class='required'>*</span></label><input name="km" id="repair__km" type="number" required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="repair__profit">Платена сума:</label><input name="profit" id="repair__profit" type="text" /></div><div class="field"><label for="repair__description">Забележка:</label><textarea scrollbar name="description" id="repair__description" onkeyup="if (this.scrollHeight > this.clientHeight) this.style.height = this.scrollHeight + 'px';"></textarea></div></fieldset><div class="buttons"><button button-type="success" type="submit">Добави</button><a role="button" button-type="danger" href="/cars/${e}/repairs" @click=${H.clickHandler}>Отказ</a></div></fieldset></form></section>`))}async function di(t,e){t.preventDefault();const i=t.target,[n,s]=te(i);try{s(!0),ae.showLoading(),await async function(t,e){var i;const{id:n}=ve(),s={owner:Object.freeze({__type:"Pointer",className:"_User",objectId:n})},r={car:Object.freeze({__type:"Pointer",className:"Car",objectId:t})},o=Object.assign({},e,s,r),a=await Kt(pe.CREATE_REPAIR,o),c=`/cars/${t}/repairs`,l=null!=(i=await ne.getCacheData(c))?i:[],d={...o,...a},u=[d,...l].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));return await ne.updateCacheData(c,JSON.parse(JSON.stringify(u))),d}(e,n),ae.showToast({text:"Успешно добавихте ремонт",type:"success"})}catch(r){const t=r instanceof Error?r.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{s(!1),ae.hideLoading(),i.reset(),H.redirect(`/cars/${e}/repairs`)}}async function ui(t){const{carId:e,repairId:i}=t.params;t.render(ti((async()=>{const t=await async function(t,e){try{return await Ce(t,e)}catch(i){const e=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:e,type:"error"}),H.redirect(`/cars/${t}/repairs`)}finally{ae.hideLoading()}}(e,i);var n,s;if(t)return s=hi,Ct`<section id="details-page"><form autocomplete="off"><fieldset><legend>Детайли по ремонта</legend><fieldset class="input-fields"><legend>Обща информация</legend><div class="field"><label for="repair__date">Датa на ремонта:</label><input disabled name="date" id="repair__date" .value=${(n=t).date} /></div><div class="field"><label for="repair__km">Километри:</label><input disabled name="km" id="repair__km" .value=${n.km} /></div><div class="field"><label for="repair__profit">Платена сума:</label><input disabled name="profit" id="repair__profit" .value=${n.profit} /></div></fieldset><fieldset class="input-fields"><legend>Информация за ремонта</legend><div class="field"><label for="repair__description">Забележка:</label><textarea disabled scrollbar name="description" id="repair__description" .value=${n.description}></textarea></div></fieldset><div class="buttons"><a role="button" button-type="info" href="/cars/${n.car.objectId}/repairs/${n.objectId}/edit" @click=${H.clickHandler}>Редактирай</a><a role="button" href="/cars/${n.car.objectId}/repairs" @click=${H.clickHandler}>Назад</a><button button-type="danger" @click=${t=>s(t,n)}>Изтрий</button></div></fieldset></form></section>`})(),ae.showLoading()))}async function hi(t,e){t.preventDefault();if(await new Promise((t=>ae.showModal({message:`Сигурен ли си, че искаш да изтриеш ремонт от дата "${e.date}"`,onConfirm:()=>t(!0),onCancel:()=>t(!1)}))))try{ae.showLoading(),await async function(t,e){var i;const n=await Xt(pe.REPAIR_BY_ID(e)),s=`/cars/${t}/repairs`,r=(null!=(i=await ne.getCacheData(s))?i:[]).filter((t=>t.objectId!==e));return await ne.updateCacheData(s,JSON.parse(JSON.stringify(r))),n}(e.car.objectId,e.objectId),ae.showToast({text:"Успешно изтрихте ремонта",type:"info"})}catch(i){const t=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{ae.hideLoading(),H.redirect(`/cars/${e.car.objectId}/repairs`)}}function pi(t){const{carId:e,repairId:i}=t.params;t.render(ti((async()=>{const t=await async function(t,e){try{return await Ce(t,e)}catch(i){const e=i instanceof Error?i.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:e,type:"error"}),H.redirect(`/cars/${t}/repairs`)}finally{ae.hideLoading()}}(e,i);var n,s;if(t)return s=fi,Ct`<section id="edit-page"><form @submit=${t=>s(t,n)} autocomplete="off"><fieldset><legend>Редактирай ремонт</legend><fieldset class="input-fields"><div class="field"><label for="repair__date">Датa на ремонта: <span class='required'>*</label><input name="date" id="repair__date" type="date" .value=${(n=t).date} style="cursor: pointer;" required onclick="this.showPicker()" oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="repair__km">Километри: <span class='required'>*</label><input name="km" id="repair__km" type="number" .value=${n.km} required oninvalid="this.setCustomValidity('Полето е задължително!')" oninput="this.setCustomValidity('')" /></div><div class="field"><label for="repair__profit">Платена сума:</label><input name="profit" id="repair__profit" type="text" .value=${n.profit} /></div><div class="field"><label for="repair__description">Забележка:</label><textarea scrollbar name="description" id="repair__description" .value=${n.description} onkeyup="if (this.scrollHeight > this.clientHeight) this.style.height = this.scrollHeight + 'px';"></textarea></div></fieldset><div class="buttons"><button button-type="success" type="submit">Запази промените</button><a role="button" button-type="danger" href="/cars/${n.car.objectId}/repairs/${n.objectId}" @click=${H.clickHandler}>Отказ</a></div></fieldset></form></section>`})(),ae.showLoading()))}async function fi(t,e){t.preventDefault();const i=t.target,[n,s]=te(i);try{s(!0),ae.showLoading(),await async function(t,e,i){var n,s;const r=await Zt(pe.REPAIR_BY_ID(e),i),o=`/cars/${t}/repairs`,a=null!=(n=await ne.getCacheData(o))?n:[],c={...null!=(s=a.find((t=>t.objectId===e)))?s:{},...i,...r},l=[c,...a].sort(((t,e)=>+new Date(e.createdAt)-+new Date(t.createdAt)));return await ne.updateCacheData(o,JSON.parse(JSON.stringify(l))),c}(e.car.objectId,e.objectId,n),ae.showToast({text:`Успешно редактирахте ремонт от дата "${n.date}"`,type:"info"})}catch(r){const t=r instanceof Error?r.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{s(!1),ae.hideLoading(),i.reset(),H.redirect(`/cars/${e.car.objectId}/repairs/${e.objectId}`)}}null==(o=document.getElementById("logout-button"))||o.addEventListener("click",(async function(t){if(t.preventDefault(),await new Promise((t=>ae.showModal({message:"Сигурен ли си, че искаш да излезеш?",title:"Изход",onConfirm:()=>t(!0),onCancel:()=>t(!1)}))))try{ae.showLoading({type:"cube-zoom"}),await async function(){const t=await Kt(ue.LOGOUT,{});return await ye(),de(),t}(),H.redirect("/user/login")}catch(e){const t=e instanceof Error?e.message:"Възникна грешка, моля опитайте по-късно";ae.showToast({text:t,type:"error"})}finally{ae.hideLoading()}})),H((function(t,e){de(),Object.assign(t,{render:ke}),function(t){const e=document.querySelector("meta[name=viewport]"),i="interactive-widget=resizes-content";if(!e){const t=document.createElement("meta");return t.name="viewport",t.content=i,void document.head.appendChild(t)}const n=e.content.split(",").map((t=>t.trim()));xe.includes(t)&&!n.includes(i)?n.push(i):!xe.includes(t)&&n.includes(i)&&n.splice(n.indexOf(i),1);e.content=n.join(", ")}(t.path);const i=me(),n=i&&xe.includes(t.path)||!i&&!xe.includes(t.path);!function(t){if(!t)return;if(!document.startViewTransition)return void t();document.startViewTransition(t)}((()=>{n?window.history.back():e()}))})),H("/user/login",(t=>Oe(t))),H("/user/register",(t=>je(t))),H("/cars",(t=>ei(t))),H("/cars/create",(t=>si(t))),H("/cars/:carId/edit",(t=>oi(t))),H("/cars/:carId/repairs",(t=>ci(t))),H("/cars/:carId/repairs/create",(t=>li(t))),H("/cars/:carId/repairs/:repairId",(t=>ui(t))),H("/cars/:carId/repairs/:repairId/edit",(t=>pi(t))),H.start();
